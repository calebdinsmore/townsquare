const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["locale.p8puc5tZ.js","fontawesome.CQaGE5Ir.js","vendor.1z4u6nD6.js"])))=>i.map(i=>d[i]);
import{l as zo,i as Bo,a as Ao,F as Ho}from"./fontawesome.CQaGE5Ir.js";import{d as ee,r as K,a as l,o as r,F as A,b as Q,e as o,n as te,u as se,f as ue,g as N,t as a,i as u,j as w,c as C,k as po,l as h,v as Lo,m as z,p as G,T as mo,q as ge,s as ce,x as Fo,y as Jo,w as Uo,z as Go,A as Wo,B as Zo,S as Ko,C as Qo}from"./vendor.1z4u6nD6.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();const Xo="5.0.1",Yo={version:Xo},ei={id:"gradients"},si=["id"],ti=ee({__name:"Gradients",setup(c){const s=K([{team:"demon",start:"#ce0100",end:"#000"},{team:"townsfolk",start:"#1f65ff",end:"#000"},{team:"minion",start:"#ff6900",end:"#000"},{team:"default",start:"#4E4E4E",end:"#000"}]);return(e,t)=>(r(),l("div",ei,[(r(!0),l(A,null,Q(s.value,(n,i)=>(r(),l("svg",{key:i,width:"0",height:"0"},[o("linearGradient",{id:n.team,x1:"50%",y1:"100%",x2:"50%",y2:"0%"},[o("stop",{offset:"0%",style:te({"stop-color":n.end,"stop-opacity":1})},null,4),o("stop",{offset:"100%",style:te({"stop-color":n.start,"stop-opacity":1})},null,4)],8,si)]))),128))]))}}),ne=(c,s)=>{const e=c.__vccOpts||c;for(const[t,n]of s)e[t]=n;return e},ni=ne(ti,[["__scopeId","data-v-ec29c5d6"]]),oi="/townsquare/apple-icon.png";function ie(){const c=se();return{t:e=>c.getters.t(e)}}const ii={class:"intro"},ai={class:"footer"},ri=ee({__name:"Intro",setup(c){const s=se(),{t:e}=ie(),t=()=>{s.commit("toggleMenu")};return(n,i)=>{const d=ue("font-awesome-icon");return r(),l("div",ii,[i[1]||(i[1]=o("img",{src:oi,alt:"",class:"logo"},null,-1)),o("div",null,[N(a(u(e)("intro.header"))+" ",1),o("span",{class:"button",onClick:t},[w(d,{icon:"cog",class:"fa fa-cog"}),N(" "+a(u(e)("intro.menu")),1)]),N(" "+a(u(e)("intro.body"))+" ",1),o("div",ai,[N(a(u(e)("intro.footerStart"))+" ",1),i[0]||(i[0]=o("a",{href:"https://github.com/Pingumask/townsquare",target:"_blank"},"GitHub",-1)),N(" "+a(u(e)("intro.footerEnd")),1)])])])}}}),li=ne(ri,[["__scopeId","data-v-8009d9c7"]]),ci={id:"controls"},ui=["title"],gi=["title"],pi={class:"headline"},mi={key:5},di={key:0,class:"headline"},_i={key:1,class:"headline"},vi={key:0},fi={class:"headline"},hi={class:"headline"},yi={class:"headline"},bi={href:"https://discord.gg/gD3AB8qCrw",target:"_blank"},ki={href:"https://discord.gg/gD3AB8qCrw",target:"_blank"},wi={href:"https://github.com/Pingumask/townsquare",target:"_blank"},Si={href:"https://github.com/Pingumask/townsquare",target:"_blank"},$i=ee({__name:"Menu",setup(c,{expose:s}){const{t:e}=ie(),t=se(),n=C(()=>t.state.grimoire),i=C(()=>t.state.session),d=C(()=>t.state.edition),v=C(()=>t.state.players.players),_=K("grimoire"),y=()=>{const E=prompt(e("prompt.background"));(E||E==="")&&t.commit("setBackground",E)},$=()=>{if(i.value.sessionId)return;const E=prompt(e("prompt.createSession"),String(Math.round(Math.random()*1e4)));E&&(t.commit("session/clearVoteHistory"),t.commit("session/setSpectator",!1),t.commit("session/setSessionId",E),t.commit("toggleGrimoire",!1),M())},M=()=>{const R=window.location.href.split("#")[0]+"#"+i.value.sessionId;navigator.clipboard.writeText(R)},p=()=>{if(i.value.isSpectator)return;const E=e("prompt.sendRoles");if(confirm(E)){let R="";for(let F=0;F<v.value.length&&!R;F++)v.value[F].role.forbidden&&(R=v.value[F].role.name);let H=R=="";if(!H){const F=e("prompt.sendRolesWithForbidden1")+R+e("prompt.sendRolesWithForbidden2");H=confirm(F)}H&&(t.commit("session/distributeRoles",!0),setTimeout(()=>{t.commit("session/distributeRoles",!1)},2e3))}},m=()=>{const E=e("prompt.imageOptIn");(n.value.isImageOptIn||confirm(E))&&re()},g=()=>{pe()},b=()=>{if(i.value.sessionId)return S();let E=prompt(e("prompt.joinSession"));E&&E.match(/^https?:\/\//i)&&(E=E.split("#").pop()||null),E&&(t.commit("session/clearVoteHistory"),t.commit("session/setSpectator",!0),t.commit("toggleGrimoire",!1),t.commit("session/setSessionId",E))},S=()=>{confirm(e("prompt.leaveSession"))&&(t.commit("session/setSpectator",!1),t.commit("session/setSessionId",""))},k=()=>{if(i.value.isSpectator||v.value.length>=20)return;const E=prompt(e("prompt.addPlayer"));E&&t.commit("players/add",E)},D=()=>{i.value.isSpectator||confirm(e("prompt.randomizeSeatings"))&&t.dispatch("players/randomize")},V=()=>{i.value.isSpectator||confirm(e("prompt.clearPlayers"))&&(i.value.nomination&&t.commit("session/nomination"),t.commit("players/clear"))},O=()=>{confirm(e("prompt.clearRoles"))&&t.dispatch("players/clearRoles")},j=()=>{t.commit("toggleNight"),n.value.isNight?t.commit("session/setMarkedPlayer",-1):(t.commit("toggleRooster",!0),setTimeout(()=>t.commit("toggleRooster",!1),4e3))},L=()=>{t.commit("toggleOrganVoteMode")},W=()=>{t.commit("toggleRinging",!0),setTimeout(()=>t.commit("toggleRinging",!1),4e3)},J=()=>t.commit("toggleGrimoire"),oe=()=>t.commit("toggleMenu"),re=()=>t.commit("toggleImageOptIn"),pe=()=>t.commit("toggleStreamerMode"),ae=()=>t.commit("toggleMuted"),P=()=>t.commit("toggleNightOrder"),q=()=>t.commit("toggleStatic"),I=E=>t.commit("setZoom",E),f=E=>t.commit("toggleModal",E);return s({addPlayer:k,hostSession:$,joinSession:b,toggleNight:j,toggleRinging:W}),(E,R)=>{const H=ue("font-awesome-icon");return r(),l("div",ci,[po(o("span",{class:"nomlog-summary",title:`${i.value.voteHistory.length} recent ${i.value.voteHistory.length==1?"nomination":"nominations"}`,onClick:R[0]||(R[0]=F=>f("voteHistory"))},[w(H,{icon:"book-dead",class:"fa fa-book-dead"}),N(" "+a(i.value.voteHistory.length),1)],8,ui),[[Lo,i.value.voteHistory.length&&i.value.sessionId]]),i.value.sessionId?(r(),l("span",{key:0,class:z(["session",{spectator:i.value.isSpectator,reconnecting:i.value.isReconnecting}]),title:`${i.value.playerCount} other players in this session${i.value.ping?" ("+i.value.ping+"ms latency)":""}`,onClick:S},[w(H,{icon:["fas","tower-broadcast"],class:"fa fa-tower-broadcast"}),N(" "+a(i.value.playerCount),1)],10,gi)):h("",!0),o("div",{class:z(["menu",{open:n.value.isMenuOpen}])},[w(H,{icon:"cog",class:"fa fa-cog",onClick:oe}),o("ul",null,[o("li",{class:z(["tabs",_.value])},[w(H,{icon:"book-open",class:"fa fa-book-open",onClick:R[1]||(R[1]=F=>_.value="grimoire")}),w(H,{icon:["fas","tower-broadcast"],class:"fa fa-tower-broadcast",onClick:R[2]||(R[2]=F=>_.value="session")}),i.value.isSpectator?h("",!0):(r(),G(H,{key:0,icon:"users",class:"fa fa-users",onClick:R[3]||(R[3]=F=>_.value="players")})),w(H,{icon:"theater-masks",class:"fa fa-theater-masks",onClick:R[4]||(R[4]=F=>_.value="characters")}),w(H,{icon:"question",class:"fa fa-question",onClick:R[5]||(R[5]=F=>_.value="help")})],2),_.value==="grimoire"?(r(),l(A,{key:0},[o("li",pi,a(u(e)("menu.grimoire.title")),1),v.value.length?(r(),l("li",{key:0,onClick:J},[n.value.isPublic?h("",!0):(r(),l(A,{key:0},[N(a(u(e)("menu.grimoire.hide")),1)],64)),n.value.isPublic?(r(),l(A,{key:1},[N(a(u(e)("menu.grimoire.show")),1)],64)):h("",!0),R[15]||(R[15]=o("em",null,"[G]",-1))])):h("",!0),i.value.isSpectator?h("",!0):(r(),l("li",{key:1,onClick:j},[n.value.isNight?h("",!0):(r(),l(A,{key:0},[N(a(u(e)("menu.grimoire.nightSwitch")),1)],64)),n.value.isNight?(r(),l(A,{key:1},[N(a(u(e)("menu.grimoire.daySwitch")),1)],64)):h("",!0),R[16]||(R[16]=o("em",null,"[S]",-1))])),i.value.isSpectator?h("",!0):(r(),l("li",{key:2,onClick:W},[N(a(u(e)("menu.grimoire.ringBell"))+" ",1),R[17]||(R[17]=o("em",null,"[B]",-1))])),i.value.isSpectator?h("",!0):(r(),l("li",{key:3,onClick:L},[N(a(u(e)("menu.grimoire.organGrinder"))+" ",1),o("em",null,[w(H,{icon:["fas",n.value.isOrganVoteMode?"check-square":"square"]},null,8,["icon"])])])),i.value.isSpectator?(r(),l("li",{key:4,onClick:P},[N(a(u(e)("menu.grimoire.order"))+" ",1),o("em",null,[w(H,{icon:["fas",n.value.isNightOrder?"check-square":"square"]},null,8,["icon"])])])):h("",!0),v.value.length?(r(),l("li",mi,[N(a(u(e)("menu.grimoire.zoom"))+" ",1),o("em",null,[w(H,{icon:"search-minus",class:"fa fa-search-minus",onClick:R[6]||(R[6]=F=>I(n.value.zoom-1))}),N(" "+a(Math.round(100+n.value.zoom*10))+"% ",1),w(H,{icon:"search-plus",class:"fa fa-search-plus",onClick:R[7]||(R[7]=F=>I(n.value.zoom+1))})])])):h("",!0),o("li",{onClick:y},[N(a(u(e)("menu.grimoire.background"))+" ",1),o("em",null,[w(H,{icon:"image",class:"fa fa-image"})])]),d.value.isOfficial?h("",!0):(r(),l("li",{key:6,onClick:m},[o("small",null,a(u(e)("menu.grimoire.customImages")),1),o("em",null,[w(H,{icon:["fas",n.value.isImageOptIn?"check-square":"square"]},null,8,["icon"])])])),o("li",{onClick:g},[o("small",null,a(u(e)("menu.grimoire.streamerMode")),1),o("em",null,[w(H,{icon:["fas",n.value.isStreamerMode?"check-square":"square"]},null,8,["icon"])])]),o("li",{onClick:q},[N(a(u(e)("menu.grimoire.animations"))+" ",1),o("em",null,[w(H,{icon:["fas",n.value.isStatic?"check-square":"square"]},null,8,["icon"])])]),o("li",{onClick:ae},[N(a(u(e)("menu.grimoire.mute"))+" ",1),o("em",null,[w(H,{icon:["fas",n.value.isMuted?"volume-mute":"volume-up"]},null,8,["icon"])])])],64)):h("",!0),_.value==="session"?(r(),l(A,{key:1},[i.value.sessionId?(r(),l("li",di,a(i.value.isSpectator?u(e)("menu.session.title.player"):u(e)("menu.session.title.host")),1)):(r(),l("li",_i,a(u(e)("menu.session.title.create")),1)),i.value.sessionId?(r(),l(A,{key:3},[i.value.ping?(r(),l("li",vi,[N(a(u(e)("menu.session.delay"))+" "+a(i.value.isSpectator?u(e)("menu.session.host"):u(e)("menu.session.players"))+" ",1),o("em",null,a(i.value.ping)+"ms",1)])):h("",!0),o("li",{onClick:M},[N(a(u(e)("menu.session.link"))+" ",1),o("em",null,[w(H,{icon:"copy",class:"fa fa-copy"})])]),i.value.isSpectator?h("",!0):(r(),l("li",{key:1,onClick:p},[N(a(u(e)("menu.session.sendRoles"))+" ",1),o("em",null,[w(H,{icon:"theater-masks",class:"fa fa-theater-masks"})])])),i.value.voteHistory.length||!i.value.isSpectator?(r(),l("li",{key:2,onClick:R[8]||(R[8]=F=>f("voteHistory"))},[N(a(u(e)("menu.session.voteHistory")),1),R[20]||(R[20]=o("em",null,"[V]",-1))])):h("",!0),o("li",{onClick:S},[N(a(u(e)("menu.session.leave"))+" ",1),o("em",null,a(i.value.sessionId),1)])],64)):(r(),l(A,{key:2},[o("li",{onClick:$},[N(a(u(e)("menu.session.storyteller")),1),R[18]||(R[18]=o("em",null,"[H]",-1))]),o("li",{onClick:b},[N(a(u(e)("menu.session.player")),1),R[19]||(R[19]=o("em",null,"[J]",-1))])],64))],64)):h("",!0),_.value==="players"&&!i.value.isSpectator?(r(),l(A,{key:2},[o("li",fi,a(u(e)("menu.players.title")),1),v.value.length<20?(r(),l("li",{key:0,onClick:k},[N(a(u(e)("menu.players.add")),1),R[21]||(R[21]=o("em",null,"[A]",-1))])):h("",!0),v.value.length>2?(r(),l("li",{key:1,onClick:D},[N(a(u(e)("menu.players.randomize"))+" ",1),o("em",null,[w(H,{icon:"dice",class:"fa fa-dice"})])])):h("",!0),v.value.length?(r(),l("li",{key:2,onClick:V},[N(a(u(e)("menu.players.removeAll"))+" ",1),o("em",null,[w(H,{icon:"trash-alt",class:"fa fa-trash-alt"})])])):h("",!0)],64)):h("",!0),_.value==="characters"?(r(),l(A,{key:3},[o("li",hi,a(u(e)("menu.characters.title")),1),i.value.isSpectator?h("",!0):(r(),l("li",{key:0,onClick:R[9]||(R[9]=F=>f("edition"))},[N(a(u(e)("menu.characters.selectEdition"))+" ",1),R[22]||(R[22]=o("em",null,"[E]",-1))])),!i.value.isSpectator&&v.value.length>4?(r(),l("li",{key:1,onClick:R[10]||(R[10]=F=>f("roles"))},[N(a(u(e)("menu.characters.assign"))+" ",1),R[23]||(R[23]=o("em",null,"[C]",-1))])):h("",!0),i.value.isSpectator?h("",!0):(r(),l("li",{key:2,onClick:R[11]||(R[11]=F=>f("fabled"))},[N(a(u(e)("menu.characters.addFabled"))+" ",1),o("em",null,[w(H,{icon:"dragon",class:"fa fa-dragon"})])])),v.value.length?(r(),l("li",{key:3,onClick:O},[N(a(u(e)("menu.characters.removeAll"))+" ",1),o("em",null,[w(H,{icon:"trash-alt",class:"fa fa-trash-alt"})])])):h("",!0)],64)):h("",!0),_.value==="help"?(r(),l(A,{key:4},[o("li",yi,a(u(e)("menu.help.title")),1),o("li",{onClick:R[12]||(R[12]=F=>f("reference"))},[N(a(u(e)("menu.help.reference"))+" ",1),R[24]||(R[24]=o("em",null,"[R]",-1))]),o("li",{onClick:R[13]||(R[13]=F=>f("nightOrder"))},[N(a(u(e)("menu.help.nightOrder"))+" ",1),R[25]||(R[25]=o("em",null,"[N]",-1))]),o("li",{onClick:R[14]||(R[14]=F=>f("gameState"))},[N(a(u(e)("menu.help.gameState"))+" ",1),o("em",null,[w(H,{icon:"file-code",class:"fa fa-file-code"})])]),o("li",null,[o("a",bi,a(u(e)("menu.help.discord")),1),o("em",null,[o("a",ki,[w(H,{icon:["fab","discord"]})])])]),o("li",null,[o("a",wi,a(u(e)("menu.help.source")),1),o("em",null,[o("a",Si,[w(H,{icon:["fab","github"]})])])])],64)):h("",!0)])],2)])}}}),Ci=ne($i,[["__scopeId","data-v-96b0c7b0"]]),_o="/townsquare/balloonist.D8KLvtlT.png",vo="/townsquare/bmr.COkFVmt0.png",fo="/townsquare/catfishing.CdDAamcb.png",ho="/townsquare/clockmaker.D9un0Nep.png",yo="/townsquare/custom.CTEroFHN.png",bo="/townsquare/doomsayer.CZyt00Rc.png",ko="/townsquare/godfather.LD5ypfO1.png",wo="/townsquare/hide_seek.CUAaYbjH.png",So="/townsquare/leviathan.C_Eg-rxI.png",$o="/townsquare/luf.DbSCqZjk.png",Co="/townsquare/midnight_oasis.D-LsWZS9.png",qo="/townsquare/poppyganda.-qGPDISB.png",Io="/townsquare/pukka.Dx7Kv-0k.png",Mo="/townsquare/reptiles.kMhlmozZ.png",Oo="/townsquare/rochambeau.Bma4_oZP.png",Vo="/townsquare/snv.7vqMnVqf.png",No="/townsquare/spooky_tea.CE9-9JPX.png",Ro="/townsquare/spooky_tea_2.IYeqFuLT.png",xo="/townsquare/tb.Rs4Wk7Xn.png",Po="/townsquare/the-horrifying-spectacle.DnM0z46K.png",fe="/townsquare/acrobat.BXNklWjQ.png",he="/townsquare/alchemist.Cmca9VrD.png",ye="/townsquare/alhadikhia.BiKFG16e.png",be="/townsquare/alsaahir.C5r2-fMD.png",ke="/townsquare/amnesiac.CyL8JYcB.png",we="/townsquare/angel.Ccl_iQkM.png",Se="/townsquare/apprentice.bvNCJmxm.png",$e="/townsquare/artist.86upsVZQ.png",Ce="/townsquare/assassin.DcCmRXaN.png",qe="/townsquare/atheist.D-TIEaLR.png",Ie="/townsquare/balloonist.CtpMLD-n.png",Me="/townsquare/banshee.CcJ2fAzZ.png",Oe="/townsquare/barber.Dy8o0QJx.png",Ve="/townsquare/barista.DG4tqUWD.png",Ne="/townsquare/baron.DV3lPbIb.png",Re="/townsquare/beggar.gZXn_6NE.png",xe="/townsquare/bishop.B6H24wW5.png",Pe="/townsquare/boffin.NkmqhFyL.png",Te="/townsquare/bonecollector.D0pF3UTW.png",je="/townsquare/boomdandy.0jOS57HG.png",De="/townsquare/bootlegger.C0Nvs0Sq.png",Ee="/townsquare/bountyhunter.DXoD67oq.png",ze="/townsquare/buddhist.CLkDoOsI.png",Be="/townsquare/bureaucrat.Bkbys95C.png",Ae="/townsquare/butcher.B0QLgpnV.png",He="/townsquare/butler.C-yqetrd.png",Le="/townsquare/cacklejack.I4hyYB1F.png",Fe="/townsquare/cannibal.BQ5JHmV2.png",Je="/townsquare/cerenovus.C95PURJ8.png",Ue="/townsquare/chambermaid.D3eFg3G2.png",Ge="/townsquare/chef.F_eB2cfv.png",We="/townsquare/choirboy.DJa_pOEw.png",Ze="/townsquare/clockmaker.DvPk7O6i.png",Ke="/townsquare/courtier.C4Qngkft.png",Qe="/townsquare/cultleader.DN18U7I-.png",Xe="/townsquare/custom.PVPwJ8R9.png",Ye="/townsquare/damsel.DiNGwFR1.png",es="/townsquare/dawn.BmSELcsO.png",ss="/townsquare/demon.HlxmNRnb.png",ts="/townsquare/deusexfiasco.Ha6U8ab3.png",ns="/townsquare/deviant.BbLlh4AA.png",os="/townsquare/devilsadvocate.E7zD2A8d.png",is="/townsquare/djinn.JlLkV9bG.png",as="/townsquare/doomsayer.FQitKu0b.png",rs="/townsquare/dreamer.Db_yKfGe.png",ls="/townsquare/drunk.D-ZiB0cD.png",cs="/townsquare/duchess.ibb6Dbyr.png",us="/townsquare/dusk.GZGnFHnd.png",gs="/townsquare/empath.CERg4oS7.png",ps="/townsquare/engineer.C804iOAj.png",ms="/townsquare/evil.9uvAxaOj.png",ds="/townsquare/eviltwin.CbqyPNSs.png",_s="/townsquare/exorcist.1U0ilFk8.png",vs="/townsquare/fabled.gjaIu6x5.png",fs="/townsquare/fanggu.CjUqOptf.png",hs="/townsquare/farmer.BCuJ2vUU.png",ys="/townsquare/fearmonger.RD3tJmYW.png",bs="/townsquare/ferryman.Bf_ezU_9.png",ks="/townsquare/fibbin.CoN2fCZ0.png",ws="/townsquare/fiddler.BMdTADQO.png",Ss="/townsquare/fisherman.w7nRrzoF.png",$s="/townsquare/flowergirl.Blg540NS.png",Cs="/townsquare/fool.CfwDu2Dd.png",qs="/townsquare/fortuneteller.D3P2_nuA.png",Is="/townsquare/gambler.CZdpd4AN.png",Ms="/townsquare/gangster.D54MRuZ-.png",Os="/townsquare/gardener.Bv4KER0g.png",Vs="/townsquare/general.D3vaKkE9.png",Ns="/townsquare/gnome.V4hCI-l5.png",Rs="/townsquare/goblin.cl1vCWWQ.png",xs="/townsquare/godfather.CV8_Wkyy.png",Ps="/townsquare/golem.CAeV3U17.png",Ts="/townsquare/good.Cj3mSDWl.png",js="/townsquare/goon.Dm7k_O3V.png",Ds="/townsquare/gossip.BvI7CDzo.png",Es="/townsquare/grandmother.C8AJJL6C.png",zs="/townsquare/gunslinger.Dbu_-fR3.png",Bs="/townsquare/harlot.CuBVo3kx.png",As="/townsquare/harpy.DFbJu0_u.png",Hs="/townsquare/hatter.CGqnIsBt.png",Ls="/townsquare/hellslibrarian.Bh0xMAjA.png",Fs="/townsquare/heretic.DTWJlLUB.png",Js="/townsquare/hermit.BGxc8Pzt.png",Us="/townsquare/highpriestess.BDucW4iw.png",Gs="/townsquare/huntsman.hIwxNaje.png",Ws="/townsquare/imp.CAoRPV-N.png",Zs="/townsquare/innkeeper.Bm3UyjHG.png",Ks="/townsquare/investigator.Dbe69ztv.png",Qs="/townsquare/judge.9C4XsNwO.png",Xs="/townsquare/juggler.BUlm-_2V.png",Ys="/townsquare/kazali.BRryKXpZ.png",et="/townsquare/king.DWpuBOh6.png",st="/townsquare/klutz.DZbDRrt9.png",tt="/townsquare/knight.KVRfAanR.png",nt="/townsquare/legion.ucNd_QCD.png",ot="/townsquare/leviathan._UVF9TlS.png",it="/townsquare/librarian.D1e6-7xt.png",at="/townsquare/lilmonsta.b_qTPgiX.png",rt="/townsquare/lleech.BrhFCiGt.png",lt="/townsquare/lordoftyphon.C9Nl2TSX.png",ct="/townsquare/lunatic.CfMNfeEv.png",ut="/townsquare/lycanthrope.CSHsotMo.png",gt="/townsquare/magician.CAMnshal.png",pt="/townsquare/marionette.Cgrpx2o6.png",mt="/townsquare/mastermind.Cvr1dCI9.png",dt="/townsquare/mathematician.CRH81C5R.png",_t="/townsquare/matron.CuSoTmUQ.png",vt="/townsquare/mayor.Yd7OjZAF.png",ft="/townsquare/mephit.Vr0hLMdY.png",ht="/townsquare/mephit.Vr0hLMdY.png",yt="/townsquare/minion.Dk4OnZdl.png",bt="/townsquare/minstrel.CDnypiE-.png",kt="/townsquare/monk.DjjNW8Kk.png",wt="/townsquare/moonchild.Wxq4OccM.png",St="/townsquare/mutant.Q_xIQlGy.png",$t="/townsquare/nightwatchman.KmsT1ZqY.png",Ct="/townsquare/noble.DE_Z6P3h.png",qt="/townsquare/nodashii.SwT6bcel.png",It="/townsquare/ogre.D29Hs8TI.png",Mt="/townsquare/ojo.C1VvkpMY.png",Ot="/townsquare/oracle.DB_OsdLI.png",Vt="/townsquare/organgrinder.KGTY-xz_.png",Nt="/townsquare/outsider.OSMgR7XB.png",Rt="/townsquare/pacifist.DCY-Tdg_.png",xt="/townsquare/philosopher.BeAPQ1lW.png",Pt="/townsquare/pithag.LsLSLs0B.png",Tt="/townsquare/pixie.DSh28L9z.png",jt="/townsquare/plaguedoctor.BpnLuAfW.png",Dt="/townsquare/plus.B--bZ7wW.png",Et="/townsquare/po.GAFBk2PN.png",zt="/townsquare/poisoner.BS3aqutu.png",Bt="/townsquare/politician.CUwUXEPY.png",At="/townsquare/poppygrower.CrbiH0u_.png",Ht="/townsquare/preacher.EvxqTkBP.png",Lt="/townsquare/princess.Bkgi-EBx.png",Ft="/townsquare/professor.BvRQjiT5.png",Jt="/townsquare/psychopath.JAheppuJ.png",Ut="/townsquare/pukka.VD6ab8EX.png",Gt="/townsquare/puzzlemaster.iwRngOcS.png",Wt="/townsquare/ravenkeeper.5OK68O0q.png",Zt="/townsquare/recluse.Dx1fdbUp.png",Kt="/townsquare/revolutionary.CSiHQ-3f.png",Qt="/townsquare/riot.DiBSBzwR.png",Xt="/townsquare/sage.CeD4dKZy.png",Yt="/townsquare/sailor.CBph-X7G.png",en="/townsquare/saint._85_P_cd.png",sn="/townsquare/savant.C4QSYyI7.png",tn="/townsquare/scapegoat.CU9ndC0g.png",nn="/townsquare/scarletwoman.B3gcWorb.png",on="/townsquare/seamstress.C9XUKDRL.png",an="/townsquare/sentinel.hj8gaZY3.png",rn="/townsquare/shabaloth.G0dX15ja.png",ln="/townsquare/shugenja.BqwjfUoK.png",cn="/townsquare/slayer.oH6nlFZp.png",un="/townsquare/snakecharmer.CbqGPbbu.png",gn="/townsquare/snitch.BC5_4efZ.png",pn="/townsquare/soldier.DCboEJD1.png",mn="/townsquare/spiritofivory.C86xhvR4.png",dn="/townsquare/spy.BtBVED9B.png",_n="/townsquare/steward.DI_JfzaQ.png",vn="/townsquare/stormcatcher.DJ-adesl.png",fn="/townsquare/summoner.EH_oaBaj.png",hn="/townsquare/sweetheart.BgTtpYRw.png",yn="/townsquare/tealady.Di6t6DIa.png",bn="/townsquare/thief.DeS9jDpO.png",kn="/townsquare/tinker.CZ0kYpz-.png",wn="/townsquare/towncrier.CWSZ-lHg.png",Sn="/townsquare/townsfolk.DrceBsHd.png",$n="/townsquare/toymaker.LNmWGQgh.png",Cn="/townsquare/traveler.BevQRlbk.png",qn="/townsquare/undertaker.Dpx7UTM0.png",In="/townsquare/vigormortis.D5Ez9X4-.png",Mn="/townsquare/villageidiot.CUdfAOxx.png",On="/townsquare/virgin.Dm2DrPgF.png",Vn="/townsquare/vizier.C6XHeJRm.png",Nn="/townsquare/vortox.BCkOLBDK.png",Rn="/townsquare/voudon.CXDmqoQG.png",xn="/townsquare/washerwoman.BDuargNg.png",Pn="/townsquare/widow.CiK5SDnx.png",Tn="/townsquare/witch.CPh34HX6.png",jn="/townsquare/wizard.Bca035Gv.png",Dn="/townsquare/wraith.Bh7bNJju.png",En="/townsquare/x.BzEj3D9B.png",zn="/townsquare/xaan.i85ohPGG.png",Bn="/townsquare/yaggababble.CsqoyzER.png",An="/townsquare/zealot.BQiVWJ9I.png",Hn="/townsquare/zombuul.1OQmDBTp.png",qi={key:1,class:"leaf-left"},Ii={key:2,class:"leaf-right"},Mi={key:4,class:"leaf-orange"},Oi={viewBox:"0 0 150 150",class:"name"},Vi=["font-size"],Ni={"xlink:href":"#curve"},Ri={key:5,class:"ability"},xi=ee({__name:"Token",props:{role:{default:()=>({})},unchecked:{type:Boolean,default:!1}},emits:["set-role"],setup(c,{emit:s}){const e=c,t=s,n=se(),i=C(()=>(e.role?.reminders||[]).length+(e.role?.remindersGlobal||[]).length),d=C(()=>new URL(Object.assign({"../assets/icons/acrobat.png":fe,"../assets/icons/alchemist.png":he,"../assets/icons/alhadikhia.png":ye,"../assets/icons/alsaahir.png":be,"../assets/icons/amnesiac.png":ke,"../assets/icons/angel.png":we,"../assets/icons/apprentice.png":Se,"../assets/icons/artist.png":$e,"../assets/icons/assassin.png":Ce,"../assets/icons/atheist.png":qe,"../assets/icons/balloonist.png":Ie,"../assets/icons/banshee.png":Me,"../assets/icons/barber.png":Oe,"../assets/icons/barista.png":Ve,"../assets/icons/baron.png":Ne,"../assets/icons/beggar.png":Re,"../assets/icons/bishop.png":xe,"../assets/icons/boffin.png":Pe,"../assets/icons/bonecollector.png":Te,"../assets/icons/boomdandy.png":je,"../assets/icons/bootlegger.png":De,"../assets/icons/bountyhunter.png":Ee,"../assets/icons/buddhist.png":ze,"../assets/icons/bureaucrat.png":Be,"../assets/icons/butcher.png":Ae,"../assets/icons/butler.png":He,"../assets/icons/cacklejack.png":Le,"../assets/icons/cannibal.png":Fe,"../assets/icons/cerenovus.png":Je,"../assets/icons/chambermaid.png":Ue,"../assets/icons/chef.png":Ge,"../assets/icons/choirboy.png":We,"../assets/icons/clockmaker.png":Ze,"../assets/icons/courtier.png":Ke,"../assets/icons/cultleader.png":Qe,"../assets/icons/custom.png":Xe,"../assets/icons/damsel.png":Ye,"../assets/icons/dawn.png":es,"../assets/icons/demon.png":ss,"../assets/icons/deusexfiasco.png":ts,"../assets/icons/deviant.png":ns,"../assets/icons/devilsadvocate.png":os,"../assets/icons/djinn.png":is,"../assets/icons/doomsayer.png":as,"../assets/icons/dreamer.png":rs,"../assets/icons/drunk.png":ls,"../assets/icons/duchess.png":cs,"../assets/icons/dusk.png":us,"../assets/icons/empath.png":gs,"../assets/icons/engineer.png":ps,"../assets/icons/evil.png":ms,"../assets/icons/eviltwin.png":ds,"../assets/icons/exorcist.png":_s,"../assets/icons/fabled.png":vs,"../assets/icons/fanggu.png":fs,"../assets/icons/farmer.png":hs,"../assets/icons/fearmonger.png":ys,"../assets/icons/ferryman.png":bs,"../assets/icons/fibbin.png":ks,"../assets/icons/fiddler.png":ws,"../assets/icons/fisherman.png":Ss,"../assets/icons/flowergirl.png":$s,"../assets/icons/fool.png":Cs,"../assets/icons/fortuneteller.png":qs,"../assets/icons/gambler.png":Is,"../assets/icons/gangster.png":Ms,"../assets/icons/gardener.png":Os,"../assets/icons/general.png":Vs,"../assets/icons/gnome.png":Ns,"../assets/icons/goblin.png":Rs,"../assets/icons/godfather.png":xs,"../assets/icons/golem.png":Ps,"../assets/icons/good.png":Ts,"../assets/icons/goon.png":js,"../assets/icons/gossip.png":Ds,"../assets/icons/grandmother.png":Es,"../assets/icons/gunslinger.png":zs,"../assets/icons/harlot.png":Bs,"../assets/icons/harpy.png":As,"../assets/icons/hatter.png":Hs,"../assets/icons/hellslibrarian.png":Ls,"../assets/icons/heretic.png":Fs,"../assets/icons/hermit.png":Js,"../assets/icons/highpriestess.png":Us,"../assets/icons/huntsman.png":Gs,"../assets/icons/imp.png":Ws,"../assets/icons/innkeeper.png":Zs,"../assets/icons/investigator.png":Ks,"../assets/icons/judge.png":Qs,"../assets/icons/juggler.png":Xs,"../assets/icons/kazali.png":Ys,"../assets/icons/king.png":et,"../assets/icons/klutz.png":st,"../assets/icons/knight.png":tt,"../assets/icons/legion.png":nt,"../assets/icons/leviathan.png":ot,"../assets/icons/librarian.png":it,"../assets/icons/lilmonsta.png":at,"../assets/icons/lleech.png":rt,"../assets/icons/lordoftyphon.png":lt,"../assets/icons/lunatic.png":ct,"../assets/icons/lycanthrope.png":ut,"../assets/icons/magician.png":gt,"../assets/icons/marionette.png":pt,"../assets/icons/mastermind.png":mt,"../assets/icons/mathematician.png":dt,"../assets/icons/matron.png":_t,"../assets/icons/mayor.png":vt,"../assets/icons/mephit.png":ft,"../assets/icons/mezepheles.png":ht,"../assets/icons/minion.png":yt,"../assets/icons/minstrel.png":bt,"../assets/icons/monk.png":kt,"../assets/icons/moonchild.png":wt,"../assets/icons/mutant.png":St,"../assets/icons/nightwatchman.png":$t,"../assets/icons/noble.png":Ct,"../assets/icons/nodashii.png":qt,"../assets/icons/ogre.png":It,"../assets/icons/ojo.png":Mt,"../assets/icons/oracle.png":Ot,"../assets/icons/organgrinder.png":Vt,"../assets/icons/outsider.png":Nt,"../assets/icons/pacifist.png":Rt,"../assets/icons/philosopher.png":xt,"../assets/icons/pithag.png":Pt,"../assets/icons/pixie.png":Tt,"../assets/icons/plaguedoctor.png":jt,"../assets/icons/plus.png":Dt,"../assets/icons/po.png":Et,"../assets/icons/poisoner.png":zt,"../assets/icons/politician.png":Bt,"../assets/icons/poppygrower.png":At,"../assets/icons/preacher.png":Ht,"../assets/icons/princess.png":Lt,"../assets/icons/professor.png":Ft,"../assets/icons/psychopath.png":Jt,"../assets/icons/pukka.png":Ut,"../assets/icons/puzzlemaster.png":Gt,"../assets/icons/ravenkeeper.png":Wt,"../assets/icons/recluse.png":Zt,"../assets/icons/revolutionary.png":Kt,"../assets/icons/riot.png":Qt,"../assets/icons/sage.png":Xt,"../assets/icons/sailor.png":Yt,"../assets/icons/saint.png":en,"../assets/icons/savant.png":sn,"../assets/icons/scapegoat.png":tn,"../assets/icons/scarletwoman.png":nn,"../assets/icons/seamstress.png":on,"../assets/icons/sentinel.png":an,"../assets/icons/shabaloth.png":rn,"../assets/icons/shugenja.png":ln,"../assets/icons/slayer.png":cn,"../assets/icons/snakecharmer.png":un,"../assets/icons/snitch.png":gn,"../assets/icons/soldier.png":pn,"../assets/icons/spiritofivory.png":mn,"../assets/icons/spy.png":dn,"../assets/icons/steward.png":_n,"../assets/icons/stormcatcher.png":vn,"../assets/icons/summoner.png":fn,"../assets/icons/sweetheart.png":hn,"../assets/icons/tealady.png":yn,"../assets/icons/thief.png":bn,"../assets/icons/tinker.png":kn,"../assets/icons/towncrier.png":wn,"../assets/icons/townsfolk.png":Sn,"../assets/icons/toymaker.png":$n,"../assets/icons/traveler.png":Cn,"../assets/icons/undertaker.png":qn,"../assets/icons/vigormortis.png":In,"../assets/icons/villageidiot.png":Mn,"../assets/icons/virgin.png":On,"../assets/icons/vizier.png":Vn,"../assets/icons/vortox.png":Nn,"../assets/icons/voudon.png":Rn,"../assets/icons/washerwoman.png":xn,"../assets/icons/widow.png":Pn,"../assets/icons/witch.png":Tn,"../assets/icons/wizard.png":jn,"../assets/icons/wraith.png":Dn,"../assets/icons/x.png":En,"../assets/icons/xaan.png":zn,"../assets/icons/yaggababble.png":Bn,"../assets/icons/zealot.png":An,"../assets/icons/zombuul.png":Hn})[`../assets/icons/${e.role.imageAlt||e.role.id}.png`],import.meta.url).href),v=C(()=>e.role?.name?.length&&e.role.name.length>10?"90%":"110%"),_=C(()=>n.state.grimoire);function y(){t("set-role",e.role)}return($,M)=>(r(),l("div",{class:z(["token",[$.role.id,{unchecked:$.unchecked}]]),onClick:y},[$.role.id?(r(),l("span",{key:0,class:"icon",style:te({backgroundImage:`url(${$.role.image&&_.value.isImageOptIn?$.role.image:d.value})`})},null,4)):h("",!0),$.role.firstNight||$.role.firstNightReminder?(r(),l("span",qi)):h("",!0),$.role.otherNight||$.role.otherNightReminder?(r(),l("span",Ii)):h("",!0),i.value?(r(),l("span",{key:3,class:z(["leaf-top"+i.value])},null,2)):h("",!0),$.role.setup?(r(),l("span",Mi)):h("",!0),(r(),l("svg",Oi,[M[0]||(M[0]=o("path",{id:"curve",d:"M 13 75 C 13 160, 138 160, 138 75",fill:"transparent"},null,-1)),o("text",{width:"150",x:"66.6%","text-anchor":"middle",class:"label mozilla","font-size":v.value},[o("textPath",Ni,a($.role?.name||""),1)],8,Vi)])),o("div",{class:z(["edition",[`edition-${$.role.edition}`,$.role.team]])},null,2),$.role.ability?(r(),l("div",Ri,a($.role.ability),1)):h("",!0)],2))}}),_e=ne(xi,[["__scopeId","data-v-05a7cfd1"]]),Pi={class:"top-right-buttons"},Ti={class:"slot"},de=ee({__name:"Modal",emits:["close"],setup(c,{emit:s}){const e=K(!1),t=s,n=()=>{t("close")};return(i,d)=>{const v=ue("font-awesome-icon");return r(),G(mo,{name:"modal-fade"},{default:ge(()=>[o("div",{class:"modal-backdrop",onClick:n},[o("div",{class:z(["modal",{maximized:e.value}]),role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription",onClick:d[1]||(d[1]=ce(()=>{},["stop"]))},[o("div",Pi,[w(v,{class:"top-right-button",icon:["fas",e.value?"window-minimize":"window-maximize"],onClick:d[0]||(d[0]=_=>e.value=!e.value)},null,8,["icon"]),w(v,{icon:"times-circle",class:"top-right-button fa-times-circle",onClick:n})]),o("div",Ti,[Fo(i.$slots,"default")])],2)])]),_:3})}}}),ji={key:0,class:"editions"},Di=["onClick"],Ei={class:"scripts"},zi=["onClick"],Bi={class:"scripts"},Ai=["onClick"],Hi={class:"custom"},Li={href:"https://script.bloodontheclocktower.com/",target:"_blank"},Fi={href:"https://github.com/bra1n/townsquare#custom-characters",target:"_blank"},Ji={class:"button-group"},Ui={class:"aside"},Gi=["onClick"],Wi={class:"button-group"},Zi=ee({__name:"EditionModal",setup(c){const{t:s}=ie(),e=se(),t=K("official"),n=C(()=>e.getters.rolesJSONbyId||new Map),i=K([]),d=["townsfolk","outsider","minion","demon"],v={townsfolk:13,outsider:4,minion:4,demon:4},_=C(()=>e.state.modals),y=C(()=>e.state.editions),$=C(()=>e.state.roles),M=C(()=>e.state.jinxes);function p(){i.value=Array.from(n.value.values()),S();for(let[P]of $.value)m(P)}function m(P){const q=i.value.find(I=>I.id===P);q&&(q.selected=!q.selected)}function g(P){return i.value?.filter(q=>q.team===P&&!q.outOfDate)??[]}function b(P){return i.value?.filter(q=>q.team===P&&q.selected).length}function S(){for(let P of i.value)P.selected=!1}function k(){S();for(let P of d){let q=g(P);for(let I=0;I<(v[P]||0);I++)if(q.length>0){let f=q.splice(Math.floor(Math.random()*q.length),1)[0];f&&(f.selected=!0)}}}function D(){const P=i.value.filter(q=>q.selected);re(P)}function V(){document.querySelector("input[type='file']")?.click()}function O(P){const q=P.target,I=q.files?.[0];if(!I?.size)return;const f=new FileReader;f.addEventListener("load",()=>{try{const E=f.result,R=JSON.parse(E);re(R)}catch(E){alert(`Error reading custom script: ${E.message}`)}q.value=""}),f.readAsText(I)}function j(){const P=prompt(s("prompt.customUrl"));P&&J(P)}function L(P){return new URL(Object.assign({"../../assets/logos/balloonist.png":_o,"../../assets/logos/bmr.png":vo,"../../assets/logos/catfishing.png":fo,"../../assets/logos/clockmaker.png":ho,"../../assets/logos/custom.png":yo,"../../assets/logos/doomsayer.png":bo,"../../assets/logos/godfather.png":ko,"../../assets/logos/hide_seek.png":wo,"../../assets/logos/leviathan.png":So,"../../assets/logos/luf.png":$o,"../../assets/logos/midnight_oasis.png":Co,"../../assets/logos/poppyganda.png":qo,"../../assets/logos/pukka.png":Io,"../../assets/logos/reptiles.png":Mo,"../../assets/logos/rochambeau.png":Oo,"../../assets/logos/snv.png":Vo,"../../assets/logos/spooky_tea.png":No,"../../assets/logos/spooky_tea_2.png":Ro,"../../assets/logos/tb.png":xo,"../../assets/logos/the-horrifying-spectacle.png":Po})[`../../assets/logos/${P.logo}.png`],import.meta.url).href}async function W(P){await J(`/scripts/${P}`)}async function J(P){const q=await fetch(P);if(q?.json)try{const I=await q.json();re(I)}catch(I){const f=I;alert(`${s("prompt.customError")}: ${f.message}`)}}async function oe(){const P=await navigator.clipboard.readText();try{const q=JSON.parse(P);re(q)}catch(q){alert(`Error reading custom script: ${q.message}`)}}function re(P){if(!P||!P.length)return;const q=P.map(Z=>typeof Z=="string"?{id:Z}:Z),I=q.findIndex(({id:Z})=>Z==="_meta"),f=I>-1?q.splice(I,1).pop()||{}:{};e.commit("setCustomRoles",q),e.commit("setEdition",{...f,id:"custom"});const E=[];let R=!1,H=!1,F=!1,Ln=!1;q.forEach(Z=>{e.state.fabled.has(Z.id||Z)?(E.push(e.state.fabled.get(Z.id||Z)),(Z.id||Z)=="djinn"?R=!0:(Z.id||Z)=="bootlegger"&&(F=!0)):Z.edition=="custom"||Z.image?Ln=!0:!R&&!H&&M.value.get(Z.id)&&M.value.get(Z.id).forEach((Gn,Fn)=>{$.value.get(Fn)&&(H=!0)})}),H&&!R&&E.push(e.state.fabled.get("djinn")),Ln&&!F&&E.push(e.state.fabled.get("bootlegger")),e.commit("players/setFabled",{fabled:E})}function pe(P){e.commit("setEdition",P),e.commit("players/setFabled",{fabled:[]})}function ae(P){e.commit("toggleModal",P)}return(P,q)=>{const I=ue("font-awesome-icon");return _.value.edition?(r(),G(de,{key:0,class:"editions",onClose:q[4]||(q[4]=f=>ae("edition"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.edition.title")),1),o("ul",null,[o("li",{class:z(["tabs",t.value])},[o("span",{class:z(["tab",{active:t.value=="official"}]),icon:"book-open",onClick:q[0]||(q[0]=f=>t.value="official")},a(u(s)("modal.edition.tab.official")),3),o("span",{class:z(["tab",{active:t.value=="popular"}]),icon:"tower-broadcast",onClick:q[1]||(q[1]=f=>t.value="popular")},a(u(s)("modal.edition.tab.popular")),3),o("span",{class:z(["tab",{active:t.value=="custom"}]),icon:"question",onClick:q[2]||(q[2]=f=>t.value="custom")},a(u(s)("modal.edition.tab.custom")),3),o("span",{class:z(["tab",{active:t.value=="build"}]),icon:"question",onClick:q[3]||(q[3]=f=>{p(),t.value="build"})},a(u(s)("modal.edition.tab.build")),3)],2),t.value=="official"?(r(),l("ul",ji,[(r(!0),l(A,null,Q(y.value.official,f=>(r(),l("li",{key:f.id,class:z(["edition",["edition-"+f.id]]),style:te({backgroundImage:`url(${L(f)})`}),onClick:E=>pe(f)},a(f.name),15,Di))),128))])):h("",!0),t.value=="popular"?(r(),l(A,{key:1},[o("ul",Ei,[(r(!0),l(A,null,Q(y.value.popular,(f,E)=>(r(),l("li",{key:E,onClick:R=>W(f[1])},a(f[0]),9,zi))),128))]),o("h3",null,a(u(s)("modal.edition.tab.teensyville")),1),o("ul",Bi,[(r(!0),l(A,null,Q(y.value.teensyville,(f,E)=>(r(),l("li",{key:E,onClick:R=>W(f[1])},a(f[0]),9,Ai))),128))])],64)):h("",!0),t.value=="custom"?(r(),l(A,{key:2},[o("div",Hi,[N(a(u(s)("modal.edition.custom.introStart"))+" ",1),o("a",Li,a(u(s)("modal.edition.custom.scriptTool")),1),N(" "+a(u(s)("modal.edition.custom.introEnd"))+".",1),q[5]||(q[5]=o("br",null,null,-1)),q[6]||(q[6]=o("br",null,null,-1)),N(" "+a(u(s)("modal.edition.custom.instructionsStart"))+" ",1),o("a",Fi,a(u(s)("modal.edition.custom.documentation"))+"n",1),N(" "+a(u(s)("modal.edition.custom.instructionsEnd")),1),q[7]||(q[7]=o("br",null,null,-1)),o("b",null,a(u(s)("modal.edition.custom.warning")),1),o("input",{ref:"upload",type:"file",accept:"application/json",onChange:O},null,544)]),o("div",Ji,[o("div",{class:"button",onClick:V},[w(I,{icon:"file-upload"}),N(" "+a(u(s)("modal.edition.custom.upload")),1)]),o("div",{class:"button",onClick:j},[w(I,{icon:"link"}),N(" "+a(u(s)("modal.edition.custom.url")),1)]),o("div",{class:"button",onClick:oe},[w(I,{icon:"clipboard"}),N(" "+a(u(s)("modal.edition.custom.clipboard")),1)])])],64)):h("",!0),t.value=="build"?(r(),l(A,{key:3},[(r(),l(A,null,Q(d,f=>o("section",{key:f,class:z(["build team",f])},[o("aside",Ui,[o("div",null,[o("h4",null,a(u(s)(`modal.reference.teamNames.${f}`)),1),o("strong",null,a(b(f)),1)])]),o("ul",{class:z(["roles",f])},[(r(!0),l(A,null,Q(g(f),E=>(r(),l("li",{key:E.id,class:"role",onClick:R=>m(E.id)},[w(_e,{role:E,unchecked:!E.selected},null,8,["role","unchecked"])],8,Gi))),128))],2)],2)),64)),o("div",Wi,[o("div",{class:"button",onClick:S},[w(I,{icon:["fas","trash-alt"]})]),o("div",{class:"button",onClick:p},[w(I,{icon:["fas","redo-alt"]})]),o("div",{class:"button",onClick:k},[w(I,{icon:["fas","random"]})]),o("div",{class:"button",onClick:D},[w(I,{icon:["fas","play"]})])])],64)):h("",!0)])]),_:1})):h("",!0)}}}),Ki=ne(Zi,[["__scopeId","data-v-fb713345"]]),Qi={class:"tokens"},Xi=["onClick"],Yi=ee({__name:"FabledModal",setup(c){const{t:s}=ie(),e=se(),t=C(()=>e.state.modals),n=C(()=>Array.from(e.state.fabled.values()).filter(v=>!e.state.players.fabled.some(_=>_.id===v.id)));function i(v){e.commit("players/setFabled",{fabled:v}),e.commit("toggleModal","fabled")}function d(v){e.commit("toggleModal",v)}return(v,_)=>t.value.fabled&&n.value.length?(r(),G(de,{key:0,onClose:_[0]||(_[0]=y=>d("fabled"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.fabled.title")),1),o("ul",Qi,[(r(!0),l(A,null,Q(n.value,y=>(r(),l("li",{key:y.id,onClick:$=>i(y)},[w(_e,{role:y},null,8,["role"])],8,Xi))),128))])]),_:1})):h("",!0)}}),ea=ne(Yi,[["__scopeId","data-v-9374b0d9"]]),sa=["value"],ta={class:"button-group"},na=ee({__name:"GameStateModal",setup(c){const{t:s}=ie(),e=se(),t=K(""),n=C(()=>e.state.modals),i=C(()=>e.state.players),d=C(()=>e.state.edition),v=C(()=>e.state.session),_=C(()=>JSON.stringify({bluffs:i.value.bluffs.map(({id:p})=>p),edition:d.value.isOfficial?{id:d.value.id}:d.value,roles:d.value.isOfficial?"":e.getters.customRolesStripped,fabled:i.value.fabled.map(p=>p.isCustom?p:{id:p.id}),players:i.value.players.map(p=>({...p,role:p.role.id||{}}))})),y=()=>{navigator.clipboard.writeText(t.value||_.value)},$=()=>{if(!v.value.isSpectator)try{const p=JSON.parse(t.value||_.value),{bluffs:m,edition:g,roles:b,fabled:S,players:k}=p;b&&e.commit("setCustomRoles",b),g&&e.commit("setEdition",g),m&&m.length&&m.forEach((D,V)=>{e.commit("players/setBluff",{index:V,role:e.state.roles.get(D)||{}})}),S&&e.commit("players/setFabled",{fabled:S.map(D=>typeof D=="string"?e.state.fabled.get(D)||{}:e.state.fabled.get(D.id)||D)}),k&&e.commit("players/set",k.map(D=>({...D,role:typeof D.role=="string"?e.state.roles.get(D.role)||e.getters.rolesJSONbyId.get(D.role)||{}:D.role||{}}))),M("gameState")}catch(p){alert("Unable to parse JSON: "+p)}},M=p=>{e.commit("toggleModal",p)};return(p,m)=>{const g=ue("font-awesome-icon");return n.value.gameState?(r(),G(de,{key:0,class:"game-state",onClose:m[3]||(m[3]=b=>M("gameState"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.gameState.title")),1),o("textarea",{value:_.value,onInput:m[0]||(m[0]=ce(b=>t.value=b.target.value,["stop"])),onClick:m[1]||(m[1]=b=>b.target.select()),onKeyup:m[2]||(m[2]=ce(()=>{},["stop"]))},null,40,sa),o("div",ta,[o("div",{class:"button townsfolk",onClick:y},[w(g,{icon:"copy",class:"fa fa-copy"}),N(" "+a(u(s)("modal.gameState.copy")),1)]),v.value.isSpectator?h("",!0):(r(),l("div",{key:0,class:"button demon",onClick:$},[w(g,{icon:"cog",class:"fa fa-cog"}),N(" "+a(u(s)("modal.gameState.load")),1)]))])]),_:1})):h("",!0)}}}),oa=ne(na,[["__scopeId","data-v-92c9145e"]]),ia={class:"night"},aa={class:"first"},ra={class:"headline"},la={class:"name"},ca={key:0,class:"player"},ua={key:1,class:"player"},ga={key:1,class:"reminder"},pa={class:"other"},ma={class:"headline"},da={class:"name"},_a={key:0,class:"player"},va={key:1,class:"player"},fa={key:1,class:"reminder"},ha=ee({__name:"NightOrderModal",setup(c){const{t:s}=ie(),e=se(),t=C(()=>{function g(V,O){return O&&V.firstNightEdition?V.firstNightEdition:V.firstNight||0}const b=[{id:"dusk",name:s("modal.nightOrder.dusk"),team:"default",firstNight:2,players:[],firstNightReminder:s("modal.nightOrder.duskDescription1")},{id:"dawn",name:s("modal.nightOrder.dawn"),firstNight:1e3,team:"default",players:[],firstNightReminder:s("modal.nightOrder.dawnDescription1")}];let S=!1;y.value.forEach(V=>{V.firstNight?b.push({players:[],...V}):V.id=="toymaker"&&(S=!0)}),M.value.forEach(V=>{if(V.firstNight&&V.team!=="traveler"){const O={...V,players:_.value.filter(j=>j.role.id===V.id)};b.push(O)}});const k=[];let D=0;return _.value.forEach(V=>{if(V.role.team=="traveler"&&(D++,!k.includes(V.role.id)&&(k.push(V.role.id),V.role.firstNight))){const O=_.value.filter(j=>j.role.id===V.role.id);b.push({players:O,...V.role})}}),(_.value.length-D>6||S)&&b.push({id:"minion",name:s("modal.nightOrder.minionInfo"),firstNight:12,team:"minion",players:_.value.filter(V=>V.role.team==="minion"),firstNightReminder:s("modal.nightOrder.minionInfoDescription")},{id:"demon",name:s("modal.nightOrder.demonInfo"),firstNight:18,team:"demon",players:_.value.filter(V=>V.role.team==="demon"),firstNightReminder:s("modal.nightOrder.demonInfoDescription")}),b.sort((V,O)=>g(V,i.value.isOfficial)-g(O,i.value.isOfficial)),b}),n=C(()=>{function g(k,D){return D&&k.otherNightEdition?k.otherNightEdition:k.otherNight||0}const b=[{id:"dusk",name:s("modal.nightOrder.dusk"),team:"default",otherNight:2,players:[],otherNightReminder:s("modal.nightOrder.duskDescription2")},{id:"dawn",name:s("modal.nightOrder.dawn"),team:"default",otherNight:1e3,players:[],otherNightReminder:s("modal.nightOrder.dawnDescription2")}];y.value.filter(({otherNight:k})=>k).forEach(k=>{b.push({players:[],...k})}),M.value.forEach(k=>{if(k.otherNight&&k.team!=="traveler"){const D={...k,players:_.value.filter(V=>V.role.id===k.id)};b.push(D)}});const S=[];return _.value.forEach(k=>{if(k.role.otherNight&&k.role.team=="traveler"&&!S.includes(k.role.id)){const D=_.value.filter(V=>V.role.id===k.role.id);S.push(k.role.id),b.push({players:D,...k.role})}}),b.sort((k,D)=>g(k,i.value.isOfficial)-g(D,i.value.isOfficial)),b}),i=C(()=>e.state.edition),d=C(()=>e.state.grimoire),v=C(()=>e.state.session),_=C(()=>e.state.players.players),y=C(()=>e.state.players.fabled),$=C(()=>e.state.modals),M=C(()=>e.state.roles),p=g=>new URL(Object.assign({"../../assets/icons/acrobat.png":fe,"../../assets/icons/alchemist.png":he,"../../assets/icons/alhadikhia.png":ye,"../../assets/icons/alsaahir.png":be,"../../assets/icons/amnesiac.png":ke,"../../assets/icons/angel.png":we,"../../assets/icons/apprentice.png":Se,"../../assets/icons/artist.png":$e,"../../assets/icons/assassin.png":Ce,"../../assets/icons/atheist.png":qe,"../../assets/icons/balloonist.png":Ie,"../../assets/icons/banshee.png":Me,"../../assets/icons/barber.png":Oe,"../../assets/icons/barista.png":Ve,"../../assets/icons/baron.png":Ne,"../../assets/icons/beggar.png":Re,"../../assets/icons/bishop.png":xe,"../../assets/icons/boffin.png":Pe,"../../assets/icons/bonecollector.png":Te,"../../assets/icons/boomdandy.png":je,"../../assets/icons/bootlegger.png":De,"../../assets/icons/bountyhunter.png":Ee,"../../assets/icons/buddhist.png":ze,"../../assets/icons/bureaucrat.png":Be,"../../assets/icons/butcher.png":Ae,"../../assets/icons/butler.png":He,"../../assets/icons/cacklejack.png":Le,"../../assets/icons/cannibal.png":Fe,"../../assets/icons/cerenovus.png":Je,"../../assets/icons/chambermaid.png":Ue,"../../assets/icons/chef.png":Ge,"../../assets/icons/choirboy.png":We,"../../assets/icons/clockmaker.png":Ze,"../../assets/icons/courtier.png":Ke,"../../assets/icons/cultleader.png":Qe,"../../assets/icons/custom.png":Xe,"../../assets/icons/damsel.png":Ye,"../../assets/icons/dawn.png":es,"../../assets/icons/demon.png":ss,"../../assets/icons/deusexfiasco.png":ts,"../../assets/icons/deviant.png":ns,"../../assets/icons/devilsadvocate.png":os,"../../assets/icons/djinn.png":is,"../../assets/icons/doomsayer.png":as,"../../assets/icons/dreamer.png":rs,"../../assets/icons/drunk.png":ls,"../../assets/icons/duchess.png":cs,"../../assets/icons/dusk.png":us,"../../assets/icons/empath.png":gs,"../../assets/icons/engineer.png":ps,"../../assets/icons/evil.png":ms,"../../assets/icons/eviltwin.png":ds,"../../assets/icons/exorcist.png":_s,"../../assets/icons/fabled.png":vs,"../../assets/icons/fanggu.png":fs,"../../assets/icons/farmer.png":hs,"../../assets/icons/fearmonger.png":ys,"../../assets/icons/ferryman.png":bs,"../../assets/icons/fibbin.png":ks,"../../assets/icons/fiddler.png":ws,"../../assets/icons/fisherman.png":Ss,"../../assets/icons/flowergirl.png":$s,"../../assets/icons/fool.png":Cs,"../../assets/icons/fortuneteller.png":qs,"../../assets/icons/gambler.png":Is,"../../assets/icons/gangster.png":Ms,"../../assets/icons/gardener.png":Os,"../../assets/icons/general.png":Vs,"../../assets/icons/gnome.png":Ns,"../../assets/icons/goblin.png":Rs,"../../assets/icons/godfather.png":xs,"../../assets/icons/golem.png":Ps,"../../assets/icons/good.png":Ts,"../../assets/icons/goon.png":js,"../../assets/icons/gossip.png":Ds,"../../assets/icons/grandmother.png":Es,"../../assets/icons/gunslinger.png":zs,"../../assets/icons/harlot.png":Bs,"../../assets/icons/harpy.png":As,"../../assets/icons/hatter.png":Hs,"../../assets/icons/hellslibrarian.png":Ls,"../../assets/icons/heretic.png":Fs,"../../assets/icons/hermit.png":Js,"../../assets/icons/highpriestess.png":Us,"../../assets/icons/huntsman.png":Gs,"../../assets/icons/imp.png":Ws,"../../assets/icons/innkeeper.png":Zs,"../../assets/icons/investigator.png":Ks,"../../assets/icons/judge.png":Qs,"../../assets/icons/juggler.png":Xs,"../../assets/icons/kazali.png":Ys,"../../assets/icons/king.png":et,"../../assets/icons/klutz.png":st,"../../assets/icons/knight.png":tt,"../../assets/icons/legion.png":nt,"../../assets/icons/leviathan.png":ot,"../../assets/icons/librarian.png":it,"../../assets/icons/lilmonsta.png":at,"../../assets/icons/lleech.png":rt,"../../assets/icons/lordoftyphon.png":lt,"../../assets/icons/lunatic.png":ct,"../../assets/icons/lycanthrope.png":ut,"../../assets/icons/magician.png":gt,"../../assets/icons/marionette.png":pt,"../../assets/icons/mastermind.png":mt,"../../assets/icons/mathematician.png":dt,"../../assets/icons/matron.png":_t,"../../assets/icons/mayor.png":vt,"../../assets/icons/mephit.png":ft,"../../assets/icons/mezepheles.png":ht,"../../assets/icons/minion.png":yt,"../../assets/icons/minstrel.png":bt,"../../assets/icons/monk.png":kt,"../../assets/icons/moonchild.png":wt,"../../assets/icons/mutant.png":St,"../../assets/icons/nightwatchman.png":$t,"../../assets/icons/noble.png":Ct,"../../assets/icons/nodashii.png":qt,"../../assets/icons/ogre.png":It,"../../assets/icons/ojo.png":Mt,"../../assets/icons/oracle.png":Ot,"../../assets/icons/organgrinder.png":Vt,"../../assets/icons/outsider.png":Nt,"../../assets/icons/pacifist.png":Rt,"../../assets/icons/philosopher.png":xt,"../../assets/icons/pithag.png":Pt,"../../assets/icons/pixie.png":Tt,"../../assets/icons/plaguedoctor.png":jt,"../../assets/icons/plus.png":Dt,"../../assets/icons/po.png":Et,"../../assets/icons/poisoner.png":zt,"../../assets/icons/politician.png":Bt,"../../assets/icons/poppygrower.png":At,"../../assets/icons/preacher.png":Ht,"../../assets/icons/princess.png":Lt,"../../assets/icons/professor.png":Ft,"../../assets/icons/psychopath.png":Jt,"../../assets/icons/pukka.png":Ut,"../../assets/icons/puzzlemaster.png":Gt,"../../assets/icons/ravenkeeper.png":Wt,"../../assets/icons/recluse.png":Zt,"../../assets/icons/revolutionary.png":Kt,"../../assets/icons/riot.png":Qt,"../../assets/icons/sage.png":Xt,"../../assets/icons/sailor.png":Yt,"../../assets/icons/saint.png":en,"../../assets/icons/savant.png":sn,"../../assets/icons/scapegoat.png":tn,"../../assets/icons/scarletwoman.png":nn,"../../assets/icons/seamstress.png":on,"../../assets/icons/sentinel.png":an,"../../assets/icons/shabaloth.png":rn,"../../assets/icons/shugenja.png":ln,"../../assets/icons/slayer.png":cn,"../../assets/icons/snakecharmer.png":un,"../../assets/icons/snitch.png":gn,"../../assets/icons/soldier.png":pn,"../../assets/icons/spiritofivory.png":mn,"../../assets/icons/spy.png":dn,"../../assets/icons/steward.png":_n,"../../assets/icons/stormcatcher.png":vn,"../../assets/icons/summoner.png":fn,"../../assets/icons/sweetheart.png":hn,"../../assets/icons/tealady.png":yn,"../../assets/icons/thief.png":bn,"../../assets/icons/tinker.png":kn,"../../assets/icons/towncrier.png":wn,"../../assets/icons/townsfolk.png":Sn,"../../assets/icons/toymaker.png":$n,"../../assets/icons/traveler.png":Cn,"../../assets/icons/undertaker.png":qn,"../../assets/icons/vigormortis.png":In,"../../assets/icons/villageidiot.png":Mn,"../../assets/icons/virgin.png":On,"../../assets/icons/vizier.png":Vn,"../../assets/icons/vortox.png":Nn,"../../assets/icons/voudon.png":Rn,"../../assets/icons/washerwoman.png":xn,"../../assets/icons/widow.png":Pn,"../../assets/icons/witch.png":Tn,"../../assets/icons/wizard.png":jn,"../../assets/icons/wraith.png":Dn,"../../assets/icons/x.png":En,"../../assets/icons/xaan.png":zn,"../../assets/icons/yaggababble.png":Bn,"../../assets/icons/zealot.png":An,"../../assets/icons/zombuul.png":Hn})[`../../assets/icons/${g.imageAlt||g.id}.png`],import.meta.url).href,m=g=>{e.commit("toggleModal",g)};return(g,b)=>{const S=ue("font-awesome-icon");return $.value.nightOrder&&M.value.size?(r(),G(de,{key:0,class:"night-reference",onClose:b[1]||(b[1]=k=>m("nightOrder"))},{default:ge(()=>[w(S,{icon:"address-card",class:"fa fa-address-card toggle",title:u(s)("modal.nightOrder.reference"),onClick:b[0]||(b[0]=k=>m("reference"))},null,8,["title"]),o("h3",null,[N(a(u(s)("modal.nightOrder.title"))+" ",1),w(S,{icon:"cloud-moon",class:"fa fa-cloud-moon"}),N(" "+a(i.value.name||u(s)("modal.nightOrder.custom")),1)]),o("div",ia,[o("ul",aa,[o("li",ra,a(u(s)("modal.nightOrder.firstNight")),1),(r(!0),l(A,null,Q(t.value,k=>(r(),l("li",{key:k.id,class:z([k.team])},[o("span",la,[N(a(k.name)+" ",1),k.players.length?(r(),l("span",ca,[b[2]||(b[2]=o("br",null,null,-1)),(r(!0),l(A,null,Q(k.players,(D,V)=>(r(),l("small",{key:V,class:z({dead:D.isDead})},a(D.name+(k.players.length>V+1?",":"")),3))),128))])):h("",!0),(k.team=="default"||k.team=="fabled")&&!v.value.isSpectator&&_.value.length&&_.value[0].role.id?(r(),l("span",ua,b[3]||(b[3]=[o("br",null,null,-1),o("small",null,null,-1)]))):h("",!0)]),k.id?(r(),l("span",{key:0,class:"icon",style:te({backgroundImage:`url(${k.image&&d.value.isImageOptIn?k.image:p(k)})`})},null,4)):h("",!0),k.firstNightReminder?(r(),l("span",ga,a(k.firstNightReminder),1)):h("",!0)],2))),128))]),o("ul",pa,[o("li",ma,a(u(s)("modal.nightOrder.otherNights")),1),(r(!0),l(A,null,Q(n.value,k=>(r(),l("li",{key:k.id,class:z([k.team])},[k.id?(r(),l("span",{key:0,class:"icon",style:te({backgroundImage:`url(${k.image&&d.value.isImageOptIn?k.image:p(k)})`})},null,4)):h("",!0),o("span",da,[N(a(k.name)+" ",1),k.players.length?(r(),l("span",_a,[b[4]||(b[4]=o("br",null,null,-1)),(r(!0),l(A,null,Q(k.players,(D,V)=>(r(),l("small",{key:V,class:z({dead:D.isDead})},a(D.name+(k.players.length>V+1?",":"")),3))),128))])):h("",!0),(k.team=="default"||k.team=="fabled")&&!v.value.isSpectator&&_.value.length&&_.value[0].role.id?(r(),l("span",va,b[5]||(b[5]=[o("br",null,null,-1),o("small",null,null,-1)]))):h("",!0)]),k.otherNightReminder?(r(),l("span",fa,a(k.otherNightReminder),1)):h("",!0)],2))),128))])])]),_:1})):h("",!0)}}}),ya=ne(ha,[["__scopeId","data-v-f36dcca9"]]),ba=["aria-label"],ka={class:"role"},wa={key:0,class:"player"},Sa={class:"name"},$a={class:"ability"},Ca={key:0,class:"team jinxed"},qa=["aria-label"],Ia={class:"role"},Ma={class:"name"},Oa={class:"ability"},Va={class:"asterisk"},Na=ee({__name:"ReferenceModal",setup(c){const{t:s}=ie(),e=se(),t=C(()=>e.state.roles),n=C(()=>e.state.modals),i=C(()=>e.state.edition),d=C(()=>e.state.grimoire),v=C(()=>e.state.jinxes),_=C(()=>e.state.players.players),y=C(()=>{const g=[];return t.value.forEach(b=>{v.value.get(b.id)&&v.value.get(b.id).forEach((S,k)=>{const D=t.value.get(k);D&&g.push({first:b,second:D,reason:S})})}),g}),$=C(()=>{const g={};return t.value.forEach(b=>{g[b.team||"default"]||(g[b.team||"default"]=[]),g[b.team||"default"]?.push(b)}),delete g.traveler,g}),M=C(()=>{const g={};return _.value.forEach(({name:b,role:S})=>{S&&S.id&&S.team!=="traveler"&&(g[S.id]||(g[S.id]=[]),g[S.id]?.push(b))}),g}),p=g=>new URL(Object.assign({"../../assets/icons/acrobat.png":fe,"../../assets/icons/alchemist.png":he,"../../assets/icons/alhadikhia.png":ye,"../../assets/icons/alsaahir.png":be,"../../assets/icons/amnesiac.png":ke,"../../assets/icons/angel.png":we,"../../assets/icons/apprentice.png":Se,"../../assets/icons/artist.png":$e,"../../assets/icons/assassin.png":Ce,"../../assets/icons/atheist.png":qe,"../../assets/icons/balloonist.png":Ie,"../../assets/icons/banshee.png":Me,"../../assets/icons/barber.png":Oe,"../../assets/icons/barista.png":Ve,"../../assets/icons/baron.png":Ne,"../../assets/icons/beggar.png":Re,"../../assets/icons/bishop.png":xe,"../../assets/icons/boffin.png":Pe,"../../assets/icons/bonecollector.png":Te,"../../assets/icons/boomdandy.png":je,"../../assets/icons/bootlegger.png":De,"../../assets/icons/bountyhunter.png":Ee,"../../assets/icons/buddhist.png":ze,"../../assets/icons/bureaucrat.png":Be,"../../assets/icons/butcher.png":Ae,"../../assets/icons/butler.png":He,"../../assets/icons/cacklejack.png":Le,"../../assets/icons/cannibal.png":Fe,"../../assets/icons/cerenovus.png":Je,"../../assets/icons/chambermaid.png":Ue,"../../assets/icons/chef.png":Ge,"../../assets/icons/choirboy.png":We,"../../assets/icons/clockmaker.png":Ze,"../../assets/icons/courtier.png":Ke,"../../assets/icons/cultleader.png":Qe,"../../assets/icons/custom.png":Xe,"../../assets/icons/damsel.png":Ye,"../../assets/icons/dawn.png":es,"../../assets/icons/demon.png":ss,"../../assets/icons/deusexfiasco.png":ts,"../../assets/icons/deviant.png":ns,"../../assets/icons/devilsadvocate.png":os,"../../assets/icons/djinn.png":is,"../../assets/icons/doomsayer.png":as,"../../assets/icons/dreamer.png":rs,"../../assets/icons/drunk.png":ls,"../../assets/icons/duchess.png":cs,"../../assets/icons/dusk.png":us,"../../assets/icons/empath.png":gs,"../../assets/icons/engineer.png":ps,"../../assets/icons/evil.png":ms,"../../assets/icons/eviltwin.png":ds,"../../assets/icons/exorcist.png":_s,"../../assets/icons/fabled.png":vs,"../../assets/icons/fanggu.png":fs,"../../assets/icons/farmer.png":hs,"../../assets/icons/fearmonger.png":ys,"../../assets/icons/ferryman.png":bs,"../../assets/icons/fibbin.png":ks,"../../assets/icons/fiddler.png":ws,"../../assets/icons/fisherman.png":Ss,"../../assets/icons/flowergirl.png":$s,"../../assets/icons/fool.png":Cs,"../../assets/icons/fortuneteller.png":qs,"../../assets/icons/gambler.png":Is,"../../assets/icons/gangster.png":Ms,"../../assets/icons/gardener.png":Os,"../../assets/icons/general.png":Vs,"../../assets/icons/gnome.png":Ns,"../../assets/icons/goblin.png":Rs,"../../assets/icons/godfather.png":xs,"../../assets/icons/golem.png":Ps,"../../assets/icons/good.png":Ts,"../../assets/icons/goon.png":js,"../../assets/icons/gossip.png":Ds,"../../assets/icons/grandmother.png":Es,"../../assets/icons/gunslinger.png":zs,"../../assets/icons/harlot.png":Bs,"../../assets/icons/harpy.png":As,"../../assets/icons/hatter.png":Hs,"../../assets/icons/hellslibrarian.png":Ls,"../../assets/icons/heretic.png":Fs,"../../assets/icons/hermit.png":Js,"../../assets/icons/highpriestess.png":Us,"../../assets/icons/huntsman.png":Gs,"../../assets/icons/imp.png":Ws,"../../assets/icons/innkeeper.png":Zs,"../../assets/icons/investigator.png":Ks,"../../assets/icons/judge.png":Qs,"../../assets/icons/juggler.png":Xs,"../../assets/icons/kazali.png":Ys,"../../assets/icons/king.png":et,"../../assets/icons/klutz.png":st,"../../assets/icons/knight.png":tt,"../../assets/icons/legion.png":nt,"../../assets/icons/leviathan.png":ot,"../../assets/icons/librarian.png":it,"../../assets/icons/lilmonsta.png":at,"../../assets/icons/lleech.png":rt,"../../assets/icons/lordoftyphon.png":lt,"../../assets/icons/lunatic.png":ct,"../../assets/icons/lycanthrope.png":ut,"../../assets/icons/magician.png":gt,"../../assets/icons/marionette.png":pt,"../../assets/icons/mastermind.png":mt,"../../assets/icons/mathematician.png":dt,"../../assets/icons/matron.png":_t,"../../assets/icons/mayor.png":vt,"../../assets/icons/mephit.png":ft,"../../assets/icons/mezepheles.png":ht,"../../assets/icons/minion.png":yt,"../../assets/icons/minstrel.png":bt,"../../assets/icons/monk.png":kt,"../../assets/icons/moonchild.png":wt,"../../assets/icons/mutant.png":St,"../../assets/icons/nightwatchman.png":$t,"../../assets/icons/noble.png":Ct,"../../assets/icons/nodashii.png":qt,"../../assets/icons/ogre.png":It,"../../assets/icons/ojo.png":Mt,"../../assets/icons/oracle.png":Ot,"../../assets/icons/organgrinder.png":Vt,"../../assets/icons/outsider.png":Nt,"../../assets/icons/pacifist.png":Rt,"../../assets/icons/philosopher.png":xt,"../../assets/icons/pithag.png":Pt,"../../assets/icons/pixie.png":Tt,"../../assets/icons/plaguedoctor.png":jt,"../../assets/icons/plus.png":Dt,"../../assets/icons/po.png":Et,"../../assets/icons/poisoner.png":zt,"../../assets/icons/politician.png":Bt,"../../assets/icons/poppygrower.png":At,"../../assets/icons/preacher.png":Ht,"../../assets/icons/princess.png":Lt,"../../assets/icons/professor.png":Ft,"../../assets/icons/psychopath.png":Jt,"../../assets/icons/pukka.png":Ut,"../../assets/icons/puzzlemaster.png":Gt,"../../assets/icons/ravenkeeper.png":Wt,"../../assets/icons/recluse.png":Zt,"../../assets/icons/revolutionary.png":Kt,"../../assets/icons/riot.png":Qt,"../../assets/icons/sage.png":Xt,"../../assets/icons/sailor.png":Yt,"../../assets/icons/saint.png":en,"../../assets/icons/savant.png":sn,"../../assets/icons/scapegoat.png":tn,"../../assets/icons/scarletwoman.png":nn,"../../assets/icons/seamstress.png":on,"../../assets/icons/sentinel.png":an,"../../assets/icons/shabaloth.png":rn,"../../assets/icons/shugenja.png":ln,"../../assets/icons/slayer.png":cn,"../../assets/icons/snakecharmer.png":un,"../../assets/icons/snitch.png":gn,"../../assets/icons/soldier.png":pn,"../../assets/icons/spiritofivory.png":mn,"../../assets/icons/spy.png":dn,"../../assets/icons/steward.png":_n,"../../assets/icons/stormcatcher.png":vn,"../../assets/icons/summoner.png":fn,"../../assets/icons/sweetheart.png":hn,"../../assets/icons/tealady.png":yn,"../../assets/icons/thief.png":bn,"../../assets/icons/tinker.png":kn,"../../assets/icons/towncrier.png":wn,"../../assets/icons/townsfolk.png":Sn,"../../assets/icons/toymaker.png":$n,"../../assets/icons/traveler.png":Cn,"../../assets/icons/undertaker.png":qn,"../../assets/icons/vigormortis.png":In,"../../assets/icons/villageidiot.png":Mn,"../../assets/icons/virgin.png":On,"../../assets/icons/vizier.png":Vn,"../../assets/icons/vortox.png":Nn,"../../assets/icons/voudon.png":Rn,"../../assets/icons/washerwoman.png":xn,"../../assets/icons/widow.png":Pn,"../../assets/icons/witch.png":Tn,"../../assets/icons/wizard.png":jn,"../../assets/icons/wraith.png":Dn,"../../assets/icons/x.png":En,"../../assets/icons/xaan.png":zn,"../../assets/icons/yaggababble.png":Bn,"../../assets/icons/zealot.png":An,"../../assets/icons/zombuul.png":Hn})[`../../assets/icons/${g.imageAlt||g.id}.png`],import.meta.url).href,m=g=>{e.commit("toggleModal",g)};return(g,b)=>{const S=ue("font-awesome-icon");return n.value.reference&&t.value.size?(r(),G(de,{key:0,class:"characters",onClose:b[1]||(b[1]=k=>m("reference"))},{default:ge(()=>[w(S,{icon:"cloud-moon",class:"fa fa-cloud-moon toggle",title:u(s)("modal.reference.nightOrder"),onClick:b[0]||(b[0]=k=>m("nightOrder"))},null,8,["title"]),o("h3",null,[N(a(u(s)("modal.reference.title"))+" ",1),w(S,{icon:"address-card",class:"fa fa-address-card"}),N(" "+a(i.value.name||"Custom Script"),1)]),(r(!0),l(A,null,Q($.value,(k,D)=>(r(),l("div",{key:D,class:z(["team",D])},[o("aside",{"aria-label":u(s)(`modal.reference.teamNames.${D}`)},[o("h4",null,a(u(s)(`modal.reference.teamNames.${D}`)),1)],8,ba),o("ul",null,[(r(!0),l(A,null,Q(k,V=>(r(),l("li",{key:V.id,class:z([D])},[V.id?(r(),l("span",{key:0,class:"icon",style:te({backgroundImage:`url(${V.image&&d.value.isImageOptIn?V.image:p(V)})`})},null,4)):h("",!0),o("div",ka,[Object.keys(M.value).length?(r(),l("span",wa,a(M.value[V.id]?M.value[V.id]?.join(", "):""),1)):h("",!0),o("span",Sa,a(V.name),1),o("span",$a,a(V.ability),1)])],2))),128)),o("li",{class:z([D])},null,2),o("li",{class:z([D])},null,2)])],2))),128)),y.value.length?(r(),l("div",Ca,[o("aside",{"aria-label":u(s)("modal.reference.jinxed")},[o("h4",null,a(u(s)("modal.reference.jinxed")),1)],8,qa),o("ul",null,[(r(!0),l(A,null,Q(y.value,(k,D)=>(r(),l("li",{key:D},[o("span",{class:"icon",style:te({backgroundImage:"url("+p(k.first)+")"})},null,4),o("span",{class:"icon",style:te({backgroundImage:"url("+p(k.second)+")"})},null,4),o("div",Ia,[o("span",Ma,a(k.first.name)+" & "+a(k.second.name),1),o("span",Oa,a(k.reason),1)])]))),128)),b[2]||(b[2]=o("li",null,null,-1)),b[3]||(b[3]=o("li",null,null,-1))])])):h("",!0),o("div",Va,a(u(s)("modal.reference.notfirstnight")),1)]),_:1})):h("",!0)}}}),Ra=ne(Na,[["__scopeId","data-v-7db4d198"]]),To=[{townsfolk:3,outsider:0,minion:1,demon:1},{townsfolk:3,outsider:1,minion:1,demon:1},{townsfolk:5,outsider:0,minion:1,demon:1},{townsfolk:5,outsider:1,minion:1,demon:1},{townsfolk:5,outsider:2,minion:1,demon:1},{townsfolk:7,outsider:0,minion:2,demon:1},{townsfolk:7,outsider:1,minion:2,demon:1},{townsfolk:7,outsider:2,minion:2,demon:1},{townsfolk:9,outsider:0,minion:3,demon:1},{townsfolk:9,outsider:1,minion:3,demon:1},{townsfolk:9,outsider:2,minion:3,demon:1}],xa=["onClick"],Pa={key:1,class:"buttons"},Ta={class:"tokens"},ja={key:0,class:"warning"},Da={class:"button-group"},Ea=ee({__name:"RolesModal",setup(c){const{t:s}=ie(),e=V=>{if(V.length===0)throw new Error("Cannot select from empty array");return V[Math.floor(Math.random()*V.length)]},t=se(),n=K({}),i=K(To),d=K(!1),v=C(()=>t.state.roles),_=C(()=>t.state.modals),y=C(()=>t.state.players.players),$=C(()=>t.state.players.fabled),M=C(()=>t.getters["players/nonTravelers"]),p=C(()=>Object.values(n.value).map(V=>V.reduce((O,{selected:j})=>O+j,0)).reduce((V,O)=>V+O,0)),m=C(()=>Object.values(n.value).some(V=>V.some(O=>O.selected&&O.setup))),g=C(()=>{let V=[];for(const O of $.value)O.setup&&V.push(O);return V}),b=V=>V.reduce((O,{selected:j})=>O+j,0),S=()=>{n.value={},v.value.forEach(j=>{const L={...j,selected:0};n.value[j.team||"unknown"]||(n.value[j.team||"unknown"]=[]),n.value[j.team||"unknown"]?.push(L)}),delete n.value.traveler;const V=Math.max(5,M.value),O=i.value[V-5];O&&Object.keys(O).forEach(j=>{const L=j;for(let W=0;W<O[L];W++)if(n.value[j]){const J=n.value[j].filter(oe=>!oe.selected);J.length&&(e(J).selected=1)}})},k=()=>{if(p.value<=M.value&&p.value){const V=Object.values(n.value).map(O=>O.reduce((j,L)=>[...j,...Array(L.selected).fill(L)],[])).reduce((O,j)=>[...O,...j],[]).map(O=>[Math.random(),O]).sort((O,j)=>O[0]-j[0]).map(O=>O[1]);y.value.forEach(O=>{if(O.role.team!=="traveler"&&V.length){const j=V.pop();t.commit("players/update",{player:O,property:"role",value:j})}}),t.commit("toggleModal","roles")}},D=V=>{t.commit("toggleModal",V)};return Jo(()=>{Object.keys(n.value).length||S()}),Uo(v,()=>{S()}),(V,O)=>{const j=ue("font-awesome-icon");return _.value.roles&&M.value>=5?(r(),G(de,{key:0,class:"roles",onClose:O[1]||(O[1]=L=>D("roles"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.roles.titleStart")+M.value+u(s)("modal.roles.titleEnd")),1),(r(!0),l(A,null,Q(n.value,(L,W)=>(r(),l("ul",{key:W,class:"tokens"},[o("li",{class:z(["count",[W]])},a(b(L))+" / "+a(i.value[M.value-5]?.[W]),3),(r(!0),l(A,null,Q(L,J=>(r(),l("li",{key:J.id,class:z([J.team,J.selected?"selected":""]),onClick:oe=>J.selected=J.selected?0:1},[w(_e,{role:J},null,8,["role"]),J.setup?(r(),G(j,{key:0,icon:"exclamation-triangle",class:"fa fa-exclamation-triangle"})):h("",!0),d.value||J.multiple?(r(),l("div",Pa,[w(j,{icon:"minus-circle",onClick:ce(oe=>J.selected--,["stop"])},null,8,["onClick"]),o("span",null,a(J.selected>1?"x"+J.selected:""),1),w(j,{icon:"plus-circle",class:"fa fa-plus-circle",onClick:ce(oe=>J.selected++,["stop"])},null,8,["onClick"])])):h("",!0)],10,xa))),128))]))),128)),o("ul",Ta,[(r(!0),l(A,null,Q(g.value,L=>(r(),l("li",{key:L.id,class:z(["fabled","selected"])},[w(_e,{role:L},null,8,["role"]),w(j,{icon:"exclamation-triangle",class:"fa fa-exclamation-triangle"})]))),128))]),m.value||g.value.length?(r(),l("div",ja,[w(j,{icon:"exclamation-triangle",class:"fa fa-exclamation-triangle"}),o("span",null,a(u(s)("modal.roles.warning")),1)])):h("",!0),o("label",{class:z(["multiple",{checked:d.value}])},[w(j,{icon:d.value?"check-square":"square"},null,8,["icon"]),po(o("input",{"onUpdate:modelValue":O[0]||(O[0]=L=>d.value=L),type:"checkbox",name:"allow-multiple"},null,512),[[Go,d.value]]),N(" "+a(u(s)("modal.roles.allowMultiple")),1)],2),o("div",Da,[o("div",{class:z(["button",{disabled:p.value>M.value||!p.value}]),onClick:k},[w(j,{icon:"people-arrows",class:"fa fa-people-arrows"}),N(" "+a(u(s)("modal.roles.assignStart")+p.value+u(s)("modal.roles.assignEnd")),1)],2),o("div",{class:"button",onClick:S},[w(j,{icon:"random",class:"fa fa-random"}),N(" "+a(u(s)("modal.roles.shuffle")),1)])])]),_:1})):h("",!0)}}}),za=ne(Ea,[["__scopeId","data-v-7b23fb05"]]),Ba="/townsquare/bishop.B6H24wW5.png",Aa="/townsquare/atheist.D-TIEaLR.png",Ha="/townsquare/cultleader.DN18U7I-.png",La="/townsquare/custom.PVPwJ8R9.png";function Y(c){return c!==null&&typeof c=="object"}function Fa(c){return Y(c)&&typeof c.nominator=="number"&&typeof c.nominee=="number"&&!c.specialVote}function Ja(c,s){return Fa(c)?s[c.nominee]?.role?.team==="traveler":!1}function Jn(c,s,e){return{nominator:c,nominee:s,specialVote:e}}const Ua={class:"allTheButtons"},Ga=["alt"],Wa=["alt"],Za=["alt"],Ka=["alt"],Qa=ee({__name:"SpecialVoteModal",setup(c){const{t:s}=ie(),e=se(),t=C(()=>e.state.modals),n=C(()=>e.state.session),i=C(()=>e.state.players.players);function d(p){e.commit("session/nomination",{nomination:p}),e.commit("toggleModal","specialVote")}function v(){d(Jn(s("modal.specialvote.st"),n.value.playerForSpecialVote,{type:"bishop"}))}function _(){d(Jn(n.value.playerForSpecialVote,s("modal.specialvote.st"),{type:"atheist"}))}function y(){d(Jn(n.value.playerForSpecialVote,null,{type:"cultleader",timerText:s("modal.specialvote.cultleaderMessages.timerText"),debateText:s("modal.specialvote.cultleaderMessages.debateText"),buttonLabel:s("modal.specialvote.cultleaderMessages.buttonLabel")}))}function $(){const p=i.value[n.value.playerForSpecialVote].name,m=prompt(s("modal.specialvote.complete")+p+" ____________________"+s("vote.exclam"));m&&d(Jn(n.value.playerForSpecialVote,null,{type:"custom",timerText:m,debateText:s("modal.specialvote.customMessages.debateText"),buttonLabel:s("modal.specialvote.customMessages.buttonLabel")}))}function M(p){e.commit("toggleModal",p)}return(p,m)=>t.value.specialVote?(r(),G(de,{key:0,onClose:m[4]||(m[4]=g=>M("specialVote"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.specialvote.title")),1),o("div",Ua,[o("button",{onClick:m[0]||(m[0]=g=>v())},[o("img",{src:Ba,alt:u(s)("modal.specialvote.bishop")},null,8,Ga),o("span",null,a(u(s)("modal.specialvote.bishop")),1)]),o("button",{onClick:m[1]||(m[1]=g=>_())},[o("img",{src:Aa,alt:u(s)("modal.specialvote.atheist")},null,8,Wa),o("span",null,a(u(s)("modal.specialvote.atheist")),1)]),o("button",{onClick:m[2]||(m[2]=g=>y())},[o("img",{src:Ha,alt:u(s)("modal.specialvote.cultleader")},null,8,Za),o("span",null,a(u(s)("modal.specialvote.cultleader")),1)]),o("button",{onClick:m[3]||(m[3]=g=>$())},[o("img",{src:La,alt:u(s)("modal.specialvote.custom")},null,8,Ka),o("span",null,a(u(s)("modal.specialvote.custom")),1)])])]),_:1})):h("",!0)}}),Xa=ne(Qa,[["__scopeId","data-v-d01273ca"]]),Ya={key:1,class:"options"},er={scope:"col"},sr={scope:"col"},tr={scope:"col"},nr={scope:"col"},or={scope:"col"},ir={scope:"col"},ar={scope:"col"},rr={key:0},lr={key:1},cr=ee({__name:"VoteHistoryModal",setup(c){const{t:s}=ie(),e=se(),t=C(()=>e.state.session),n=C(()=>e.state.modals),i=()=>{e.commit("session/clearVoteHistory")},d=()=>{e.commit("session/setVoteHistoryAllowed",!t.value.isVoteHistoryAllowed)},v=_=>{e.commit("toggleModal",_)};return(_,y)=>{const $=ue("font-awesome-icon");return n.value.voteHistory&&(t.value.voteHistory||!t.value.isSpectator)?(r(),G(de,{key:0,class:"vote-history",onClose:y[0]||(y[0]=M=>v("voteHistory"))},{default:ge(()=>[t.value.isSpectator?(r(),G($,{key:0,icon:"trash-alt",class:"fa fa-trash-alt clear",title:"Clear vote history",onClick:i})):h("",!0),o("h3",null,a(u(s)("modal.voteHistory.title")),1),t.value.isSpectator?h("",!0):(r(),l("div",Ya,[o("div",{class:"option",onClick:d},[w($,{icon:["fas",t.value.isVoteHistoryAllowed?"check-square":"square"]},null,8,["icon"]),N(" "+a(u(s)("modal.voteHistory.accessibility")),1)]),o("div",{class:"option",onClick:i},[w($,{icon:"trash-alt",class:"fa fa-trash-alt"}),N(" "+a(u(s)("modal.voteHistory.clear")),1)])])),o("table",null,[o("thead",null,[o("tr",null,[o("th",er,a(u(s)("modal.voteHistory.time")),1),o("th",sr,a(u(s)("modal.voteHistory.nominator")),1),o("th",tr,a(u(s)("modal.voteHistory.nominee")),1),o("th",nr,a(u(s)("modal.voteHistory.type")),1),o("th",or,a(u(s)("modal.voteHistory.votes")),1),o("th",ir,a(u(s)("modal.voteHistory.majority")),1),o("th",ar,[w($,{icon:"user-friends",class:"fa fa-user-friends"}),N(" "+a(u(s)("modal.voteHistory.voters")),1)])])]),o("tbody",null,[(r(!0),l(A,null,Q(t.value.voteHistory,(M,p)=>(r(),l("tr",{key:p},[o("td",null,a(M.timestamp.getHours().toString().padStart(2,"0"))+":"+a(M.timestamp.getMinutes().toString().padStart(2,"0")),1),o("td",null,a(M.nominator),1),o("td",null,a(M.nominee),1),o("td",null,a(M.type),1),o("td",null,[N(a(M.votes==null?"?":M.votes.length)+" ",1),w($,{icon:"hand-paper",class:"fa fa-hand-paper"})]),M.nominee?(r(),l("td",rr,[N(a(M.majority)+" ",1),w($,{icon:["fas",M.votes==null?"minus-square":M.votes.length>=M.majority?"check-square":"square"]},null,8,["icon"])])):(r(),l("td",lr)),o("td",null,a(M.votes==null?u(s)("modal.voteHistory.hiddenVote"):M.votes.join(", ")),1)]))),128))])])]),_:1})):h("",!0)}}}),ur=ne(cr,[["__scopeId","data-v-81a0e682"]]),Un="/townsquare/countdown.DRzblIRW.mp3",ro="/townsquare/rooster.TVpA4sXi.mp3",gr="/townsquare/dawn.BmSELcsO.png",pr=["data-text"],mr=ee({__name:"Countdown",props:{timerName:{},timerDuration:{}},setup(c){const s=c,e=C(()=>`--timer: ${s.timerDuration}`);return(t,n)=>(r(),l("div",{"data-text":t.timerName,style:te(e.value),class:"countdown"},null,12,pr))}}),jo=ne(mr,[["__scopeId","data-v-8a266eee"]]),dr={class:"info"},_r={key:0},vr={key:0,class:"meta"},fr={key:1},hr={key:1},yr={key:0},br={key:2},kr={key:3},wr=["autoplay","muted"],Sr={key:4},$r=["autoplay","muted"],Cr={key:5,class:"marked"},qr=ee({__name:"TownInfo",setup(c){const{t:s}=ie(),e=se(),t=C(()=>e.state.edition),n=C(()=>e.state.grimoire),i=C(()=>e.state.session),d=C(()=>e.state.players.players),v=C(()=>typeof i.value.markedPlayer=="string"&&!(i.value.isSpectator&&n.value.isOrganVoteMode)),_=C(()=>t.value.logo&&!t.value.logo.includes(".")?new URL(Object.assign({"../assets/logos/balloonist.png":_o,"../assets/logos/bmr.png":vo,"../assets/logos/catfishing.png":fo,"../assets/logos/clockmaker.png":ho,"../assets/logos/custom.png":yo,"../assets/logos/doomsayer.png":bo,"../assets/logos/godfather.png":ko,"../assets/logos/hide_seek.png":wo,"../assets/logos/leviathan.png":So,"../assets/logos/luf.png":$o,"../assets/logos/midnight_oasis.png":Co,"../assets/logos/poppyganda.png":qo,"../assets/logos/pukka.png":Io,"../assets/logos/reptiles.png":Mo,"../assets/logos/rochambeau.png":Oo,"../assets/logos/snv.png":Vo,"../assets/logos/spooky_tea.png":No,"../assets/logos/spooky_tea_2.png":Ro,"../assets/logos/tb.png":xo,"../assets/logos/the-horrifying-spectacle.png":Po})[`../assets/logos/${t.value.logo}.png`],import.meta.url).href:t.value.logo&&n.value.isImageOptIn?t.value.logo:new URL("/townsquare/custom.CTEroFHN.png",import.meta.url).href),y=C(()=>{const $=e.getters["players/nonTravelers"],M=d.value.filter(m=>m.isDead!==!0).length,p=d.value.filter(m=>m.isDead!==!0&&m.role.team!=="traveler").length;return{...To[$-5],traveler:d.value.length-$,alive:M,aliveNT:p,votes:d.value.filter(m=>!m.isDead&&m.role.id!=="beggar"||m.voteToken).length}});return($,M)=>{const p=ue("font-awesome-icon");return r(),l("ul",dr,[M[3]||(M[3]=o("audio",{preload:"auto"},[o("source",{src:Un}),o("source",{src:ro})],-1)),o("li",{class:z(["edition",["edition-"+t.value.id]]),style:te({backgroundImage:"url("+_.value+")"})},null,6),d.value.length-y.value.traveler<5?(r(),l("li",_r,a(u(s)("towninfo.addPlayers")),1)):h("",!0),o("li",null,[t.value.isOfficial?h("",!0):(r(),l("span",vr,a(t.value.name)+" "+a(t.value.author?" "+t.value.author:""),1)),o("span",null,[N(a(d.value.length)+" ",1),w(p,{icon:"users",class:"players fa-users"})]),o("span",null,[N(a(y.value.alive)+" ",1),w(p,{icon:"heartbeat",class:"alive fa-heartbeat"})]),y.value.traveler>0?(r(),l("span",fr,[N(a(y.value.aliveNT)+" ",1),w(p,{icon:"house-user",class:"alive fa-house-user"})])):h("",!0),o("span",null,[N(a(y.value.votes)+" ",1),w(p,{icon:"vote-yea",class:"votes fa-vote-yea"})])]),d.value.length-y.value.traveler>=5?(r(),l("li",hr,[o("span",null,[N(a(y.value.townsfolk)+" ",1),w(p,{icon:"user-friends",class:"townsfolk fa-user-friends"})]),o("span",null,[N(a(y.value.outsider)+" ",1),w(p,{class:"outsider",icon:(y.value.outsider||0)>1?"user-friends":"user"},null,8,["icon"])]),o("span",null,[N(a(y.value.minion)+" ",1),w(p,{class:"minion",icon:(y.value.minion||0)>1?"user-friends":"user"},null,8,["icon"])]),o("span",null,[N(a(y.value.demon)+" ",1),w(p,{class:"demon",icon:(y.value.demon||0)>1?"user-friends":"user"},null,8,["icon"])]),y.value.traveler?(r(),l("span",yr,[N(a(y.value.traveler)+" ",1),w(p,{class:"traveler",icon:y.value.traveler>1?"user-friends":"user"},null,8,["icon"])])):h("",!0)])):h("",!0),n.value.isNight?(r(),l("li",br,[w(p,{icon:["fas","cloud-moon"]}),N(" "+a(u(s)("towninfo.nightPhase")),1)])):h("",!0),n.value.isRinging?(r(),l("li",kr,[o("audio",{autoplay:!n.value.isMuted,muted:n.value.isMuted},M[0]||(M[0]=[o("source",{src:Un},null,-1)]),8,wr),w(p,{icon:["fas","music"]}),w(p,{icon:["fas","bell"]}),w(p,{icon:["fas","music"]})])):n.value.isRooster?(r(),l("li",Sr,[o("audio",{autoplay:!n.value.isMuted,muted:n.value.isMuted},M[1]||(M[1]=[o("source",{src:ro},null,-1)]),8,$r),M[2]||(M[2]=o("img",{src:gr,style:{height:"2em"}},null,-1))])):h("",!0),v.value?(r(),l("li",Cr,[w(p,{icon:"skull",class:"fa fa-skull"})])):h("",!0),o("li",null,[n.value.timer.duration?(r(),G(jo,{key:0,"timer-name":n.value.timer.name,"timer-duration":n.value.timer.duration,class:"timer"},null,8,["timer-name","timer-duration"])):h("",!0)])])}}}),Ir=ne(qr,[["__scopeId","data-v-49092e55"]]),Mr={key:0,class:"night-order first"},Or={key:0},Vr={key:1,class:"night-order other"},Nr={key:0},Rr={class:"overlay"},xr={class:"marked"},Pr={key:1,class:"pronouns"},Tr={key:0,class:"menu"},jr=["onClick"],Dr={class:"text"},Er=ee({__name:"Seat",props:{player:{},unchecked:{type:Boolean}},emits:["update-player","trigger"],setup(c,{emit:s}){const{t:e}=ie(),t=c,n=s,i=se(),d=C(()=>i.state.players.players),v=C(()=>i.state.grimoire),_=C(()=>i.state.session),y=C(()=>i.getters["players/nightOrder"]),$=C(()=>d.value.indexOf(t.player)),M=C(()=>{if(!Y(_.value.nomination))return!1;const P=_.value.nomination,q=d.value.length;let I;if(typeof P.nominee=="number")I=P.nominee;else if(typeof P.nominator=="number")I=P.nominator;else return!1;return($.value-1+q-I)%q<_.value.lockedVote-1}),p=C(()=>Y(_.value.nomination)?!!_.value.nomination.specialVote?.timerText:!1),m=C(()=>d.value.length<7?{width:18+v.value.zoom+"vmin"}:d.value.length<=10?{width:16+v.value.zoom+"vmin"}:d.value.length<=15?{width:14+v.value.zoom+"vmin"}:{width:12+v.value.zoom+"vmin"}),g=K(!1);function b(){if(_.value.isSpectator&&t.player.id!==_.value.playerId)return;const P=prompt("Player pronouns",t.player.pronouns);P!==null&&O("pronouns",P,!0)}function S(){v.value.isPublic?t.player.isDead?t.player.voteToken?O("voteToken",!1):(O("voteToken",!0),O("isDead",!1)):(O("isDead",!0),_.value.markedPlayer===$.value&&i.commit("session/setMarkedPlayer",-1)):(O("isDead",!t.player.isDead),_.value.markedPlayer===$.value&&i.commit("session/setMarkedPlayer",-1),t.player.voteToken!=t.player.isDead&&O("voteToken",!t.player.voteToken))}function k(){if(_.value.isSpectator)return;const P=prompt("Player name",t.player.name)||t.player.name;O("name",P,!0)}function D(P){const q=[...t.player.reminders];q.splice(t.player.reminders.indexOf(P),1),O("reminders",q,!0)}function V(P){return new URL(Object.assign({"../assets/icons/acrobat.png":fe,"../assets/icons/alchemist.png":he,"../assets/icons/alhadikhia.png":ye,"../assets/icons/alsaahir.png":be,"../assets/icons/amnesiac.png":ke,"../assets/icons/angel.png":we,"../assets/icons/apprentice.png":Se,"../assets/icons/artist.png":$e,"../assets/icons/assassin.png":Ce,"../assets/icons/atheist.png":qe,"../assets/icons/balloonist.png":Ie,"../assets/icons/banshee.png":Me,"../assets/icons/barber.png":Oe,"../assets/icons/barista.png":Ve,"../assets/icons/baron.png":Ne,"../assets/icons/beggar.png":Re,"../assets/icons/bishop.png":xe,"../assets/icons/boffin.png":Pe,"../assets/icons/bonecollector.png":Te,"../assets/icons/boomdandy.png":je,"../assets/icons/bootlegger.png":De,"../assets/icons/bountyhunter.png":Ee,"../assets/icons/buddhist.png":ze,"../assets/icons/bureaucrat.png":Be,"../assets/icons/butcher.png":Ae,"../assets/icons/butler.png":He,"../assets/icons/cacklejack.png":Le,"../assets/icons/cannibal.png":Fe,"../assets/icons/cerenovus.png":Je,"../assets/icons/chambermaid.png":Ue,"../assets/icons/chef.png":Ge,"../assets/icons/choirboy.png":We,"../assets/icons/clockmaker.png":Ze,"../assets/icons/courtier.png":Ke,"../assets/icons/cultleader.png":Qe,"../assets/icons/custom.png":Xe,"../assets/icons/damsel.png":Ye,"../assets/icons/dawn.png":es,"../assets/icons/demon.png":ss,"../assets/icons/deusexfiasco.png":ts,"../assets/icons/deviant.png":ns,"../assets/icons/devilsadvocate.png":os,"../assets/icons/djinn.png":is,"../assets/icons/doomsayer.png":as,"../assets/icons/dreamer.png":rs,"../assets/icons/drunk.png":ls,"../assets/icons/duchess.png":cs,"../assets/icons/dusk.png":us,"../assets/icons/empath.png":gs,"../assets/icons/engineer.png":ps,"../assets/icons/evil.png":ms,"../assets/icons/eviltwin.png":ds,"../assets/icons/exorcist.png":_s,"../assets/icons/fabled.png":vs,"../assets/icons/fanggu.png":fs,"../assets/icons/farmer.png":hs,"../assets/icons/fearmonger.png":ys,"../assets/icons/ferryman.png":bs,"../assets/icons/fibbin.png":ks,"../assets/icons/fiddler.png":ws,"../assets/icons/fisherman.png":Ss,"../assets/icons/flowergirl.png":$s,"../assets/icons/fool.png":Cs,"../assets/icons/fortuneteller.png":qs,"../assets/icons/gambler.png":Is,"../assets/icons/gangster.png":Ms,"../assets/icons/gardener.png":Os,"../assets/icons/general.png":Vs,"../assets/icons/gnome.png":Ns,"../assets/icons/goblin.png":Rs,"../assets/icons/godfather.png":xs,"../assets/icons/golem.png":Ps,"../assets/icons/good.png":Ts,"../assets/icons/goon.png":js,"../assets/icons/gossip.png":Ds,"../assets/icons/grandmother.png":Es,"../assets/icons/gunslinger.png":zs,"../assets/icons/harlot.png":Bs,"../assets/icons/harpy.png":As,"../assets/icons/hatter.png":Hs,"../assets/icons/hellslibrarian.png":Ls,"../assets/icons/heretic.png":Fs,"../assets/icons/hermit.png":Js,"../assets/icons/highpriestess.png":Us,"../assets/icons/huntsman.png":Gs,"../assets/icons/imp.png":Ws,"../assets/icons/innkeeper.png":Zs,"../assets/icons/investigator.png":Ks,"../assets/icons/judge.png":Qs,"../assets/icons/juggler.png":Xs,"../assets/icons/kazali.png":Ys,"../assets/icons/king.png":et,"../assets/icons/klutz.png":st,"../assets/icons/knight.png":tt,"../assets/icons/legion.png":nt,"../assets/icons/leviathan.png":ot,"../assets/icons/librarian.png":it,"../assets/icons/lilmonsta.png":at,"../assets/icons/lleech.png":rt,"../assets/icons/lordoftyphon.png":lt,"../assets/icons/lunatic.png":ct,"../assets/icons/lycanthrope.png":ut,"../assets/icons/magician.png":gt,"../assets/icons/marionette.png":pt,"../assets/icons/mastermind.png":mt,"../assets/icons/mathematician.png":dt,"../assets/icons/matron.png":_t,"../assets/icons/mayor.png":vt,"../assets/icons/mephit.png":ft,"../assets/icons/mezepheles.png":ht,"../assets/icons/minion.png":yt,"../assets/icons/minstrel.png":bt,"../assets/icons/monk.png":kt,"../assets/icons/moonchild.png":wt,"../assets/icons/mutant.png":St,"../assets/icons/nightwatchman.png":$t,"../assets/icons/noble.png":Ct,"../assets/icons/nodashii.png":qt,"../assets/icons/ogre.png":It,"../assets/icons/ojo.png":Mt,"../assets/icons/oracle.png":Ot,"../assets/icons/organgrinder.png":Vt,"../assets/icons/outsider.png":Nt,"../assets/icons/pacifist.png":Rt,"../assets/icons/philosopher.png":xt,"../assets/icons/pithag.png":Pt,"../assets/icons/pixie.png":Tt,"../assets/icons/plaguedoctor.png":jt,"../assets/icons/plus.png":Dt,"../assets/icons/po.png":Et,"../assets/icons/poisoner.png":zt,"../assets/icons/politician.png":Bt,"../assets/icons/poppygrower.png":At,"../assets/icons/preacher.png":Ht,"../assets/icons/princess.png":Lt,"../assets/icons/professor.png":Ft,"../assets/icons/psychopath.png":Jt,"../assets/icons/pukka.png":Ut,"../assets/icons/puzzlemaster.png":Gt,"../assets/icons/ravenkeeper.png":Wt,"../assets/icons/recluse.png":Zt,"../assets/icons/revolutionary.png":Kt,"../assets/icons/riot.png":Qt,"../assets/icons/sage.png":Xt,"../assets/icons/sailor.png":Yt,"../assets/icons/saint.png":en,"../assets/icons/savant.png":sn,"../assets/icons/scapegoat.png":tn,"../assets/icons/scarletwoman.png":nn,"../assets/icons/seamstress.png":on,"../assets/icons/sentinel.png":an,"../assets/icons/shabaloth.png":rn,"../assets/icons/shugenja.png":ln,"../assets/icons/slayer.png":cn,"../assets/icons/snakecharmer.png":un,"../assets/icons/snitch.png":gn,"../assets/icons/soldier.png":pn,"../assets/icons/spiritofivory.png":mn,"../assets/icons/spy.png":dn,"../assets/icons/steward.png":_n,"../assets/icons/stormcatcher.png":vn,"../assets/icons/summoner.png":fn,"../assets/icons/sweetheart.png":hn,"../assets/icons/tealady.png":yn,"../assets/icons/thief.png":bn,"../assets/icons/tinker.png":kn,"../assets/icons/towncrier.png":wn,"../assets/icons/townsfolk.png":Sn,"../assets/icons/toymaker.png":$n,"../assets/icons/traveler.png":Cn,"../assets/icons/undertaker.png":qn,"../assets/icons/vigormortis.png":In,"../assets/icons/villageidiot.png":Mn,"../assets/icons/virgin.png":On,"../assets/icons/vizier.png":Vn,"../assets/icons/vortox.png":Nn,"../assets/icons/voudon.png":Rn,"../assets/icons/washerwoman.png":xn,"../assets/icons/widow.png":Pn,"../assets/icons/witch.png":Tn,"../assets/icons/wizard.png":jn,"../assets/icons/wraith.png":Dn,"../assets/icons/x.png":En,"../assets/icons/xaan.png":zn,"../assets/icons/yaggababble.png":Bn,"../assets/icons/zealot.png":An,"../assets/icons/zombuul.png":Hn})[`../assets/icons/${P}.png`],import.meta.url).href}function O(P,q,I=!1){_.value.isSpectator&&P!=="reminders"&&P!=="pronouns"||(i.commit("players/update",{player:t.player,property:P,value:q}),I&&(g.value=!1))}function j(){g.value=!1,n("trigger",["removePlayer"])}function L(P){g.value=!1,n("trigger",["swapPlayer",P])}function W(P){g.value=!1,n("trigger",["movePlayer",P])}function J(P){g.value=!1,n("trigger",["nominatePlayer",P])}function oe(){g.value=!1,i.commit("session/setPlayerForSpecialVote",d.value.indexOf(t.player)),i.commit("toggleModal","specialVote")}function re(){n("trigger",["cancel"])}function pe(){g.value=!1,n("trigger",["claimSeat"])}function ae(){_.value.isSpectator||M.value&&i.commit("session/voteSync",[$.value,!_.value.votes[$.value]])}return(P,q)=>{const I=ue("font-awesome-icon");return r(),l("li",{style:te(m.value)},[o("div",{ref:"player",class:z(["player",[{dead:t.player.isDead,marked:_.value.markedPlayer===$.value,"no-vote":!t.player.voteToken,you:_.value.sessionId&&t.player.id&&t.player.id===_.value.playerId,"vote-yes":_.value.votes[$.value],"vote-lock":M.value},t.player.role.team]])},[o("div",{class:"shroud",onClick:q[0]||(q[0]=f=>S())}),o("div",{class:"life",onClick:q[1]||(q[1]=f=>S())}),y.value.get(t.player).first&&(v.value.isNightOrder||!_.value.isSpectator)?(r(),l("div",Mr,[o("em",null,a(y.value.get(t.player).first)+".",1),t.player.role.firstNightReminder?(r(),l("span",Or,a(t.player.role.firstNightReminder),1)):h("",!0)])):h("",!0),y.value.get(t.player).other&&(v.value.isNightOrder||!_.value.isSpectator)?(r(),l("div",Vr,[o("em",null,a(y.value.get(t.player).other)+".",1),t.player.role.otherNightReminder?(r(),l("span",Nr,a(t.player.role.otherNightReminder),1)):h("",!0)])):h("",!0),w(_e,{role:t.player.role,onSetRole:q[2]||(q[2]=f=>P.$emit("trigger",["openRoleModal"]))},null,8,["role"]),o("div",Rr,[!v.value.isOrganVoteMode||p.value||!_.value.isSpectator||t.player.id==_.value.playerId?(r(),G(I,{key:0,icon:"hand-paper",class:"fa fa-hand-paper vote",title:u(e)("player.handUp"),onClick:q[3]||(q[3]=f=>ae())},null,8,["title"])):h("",!0),v.value.isOrganVoteMode&&!p.value&&_.value.isSpectator&&t.player.id!==_.value.playerId?(r(),G(I,{key:1,icon:"question",class:"fa fa-question vote",title:u(e)("player.handUp"),onClick:q[4]||(q[4]=f=>ae())},null,8,["title"])):h("",!0),!v.value.isOrganVoteMode||!_.value.isSpectator||t.player.id==_.value.playerId?(r(),G(I,{key:2,icon:"times",class:"fa fa-times vote",title:u(e)("player.handDown"),onClick:q[5]||(q[5]=f=>ae())},null,8,["title"])):h("",!0),v.value.isOrganVoteMode&&!p.value&&_.value.isSpectator&&t.player.id!==_.value.playerId?(r(),G(I,{key:3,icon:"question",class:"fa fa-question vote",title:u(e)("player.handDown"),onClick:q[6]||(q[6]=f=>ae())},null,8,["title"])):h("",!0),w(I,{icon:"times-circle",class:"fa fa-times-circle cancel",title:u(e)("player.cancel"),onClick:q[7]||(q[7]=f=>re())},null,8,["title"]),w(I,{icon:"exchange-alt",class:"fa fa-exchange-alt swap",title:u(e)("player.swap"),onClick:q[8]||(q[8]=f=>L(t.player))},null,8,["title"]),w(I,{icon:"redo-alt",class:"fa fa-redo-alt move",title:u(e)("player.move"),onClick:q[9]||(q[9]=f=>W(t.player))},null,8,["title"]),w(I,{icon:"hand-point-right",class:"fa fa-hand-point-right nominate",title:u(e)("player.nominate"),onClick:q[10]||(q[10]=f=>J(t.player))},null,8,["title"])]),t.player.id&&_.value.sessionId?(r(),G(I,{key:2,icon:"chair",class:z(["fa fa-chair seat",{highlight:_.value.isRolesDistributed}])},null,8,["class"])):h("",!0),(t.player.isDead||P.player.role.id=="beggar")&&t.player.voteToken?(r(),G(I,{key:3,icon:"vote-yea",class:"fa fa-vote-yea has-vote",title:u(e)("player.ghostVote"),onClick:q[11]||(q[11]=f=>O("voteToken",!1))},null,8,["title"])):h("",!0),(t.player.isDead||P.player.role.id=="beggar")&&!t.player.voteToken&&!_.value.isSpectator?(r(),G(I,{key:4,icon:"vote-yea",class:"fa fa-vote-yea has-vote no-token",title:u(e)("player.ghostVote"),onClick:q[12]||(q[12]=f=>O("voteToken",!0))},null,8,["title"])):h("",!0),o("div",xr,[_.value.isSpectator&&v.value.isOrganVoteMode?h("",!0):(r(),G(I,{key:0,icon:"skull",class:"fa fa-skull"}))]),o("div",{class:z(["name",{active:g.value}]),onClick:q[13]||(q[13]=f=>g.value=!g.value)},[o("span",null,a(t.player.name),1),t.player.pronouns?(r(),G(I,{key:0,icon:"venus-mars",class:"fa fa-venus-mars"})):h("",!0),t.player.pronouns?(r(),l("div",Pr,[o("span",null,a(t.player.pronouns),1)])):h("",!0)],2),w(mo,{name:"fold"},{default:ge(()=>[g.value?(r(),l("ul",Tr,[!_.value.isSpectator||_.value.isSpectator&&t.player.id===_.value.playerId?(r(),l("li",{key:0,onClick:b},[w(I,{icon:"venus-mars",class:"fa fa-venus-mars"}),N(" "+a(u(e)("player.changePronouns")),1)])):h("",!0),_.value.isSpectator?h("",!0):(r(),l(A,{key:1},[o("li",{onClick:k},[w(I,{icon:"user-edit",class:"fa fa-user-edit"}),N(" "+a(u(e)("player.changeName")),1)]),o("li",{class:z({disabled:_.value.lockedVote}),onClick:q[14]||(q[14]=f=>W())},[w(I,{icon:"redo-alt",class:"fa fa-redo-alt"}),N(" "+a(u(e)("player.movePlayer")),1)],2),o("li",{class:z({disabled:_.value.lockedVote}),onClick:q[15]||(q[15]=f=>L())},[w(I,{icon:"exchange-alt",class:"fa fa-exchange-alt"}),N(" "+a(u(e)("player.swapPlayers")),1)],2),o("li",{class:z({disabled:_.value.lockedVote}),onClick:j},[w(I,{icon:"times-circle",class:"fa fa-times-circle"}),N(" "+a(u(e)("player.removePlayer")),1)],2),t.player.id&&_.value.sessionId?(r(),l("li",{key:0,onClick:q[16]||(q[16]=f=>O("id","",!0))},[w(I,{icon:"chair",class:"fa fa-chair"}),N(" "+a(u(e)("player.emptySeat")),1)])):h("",!0),_.value.nomination?h("",!0):(r(),l("li",{key:1,onClick:q[17]||(q[17]=f=>J())},[w(I,{icon:"hand-point-right",class:"fa fa-hand-point-right"}),N(" "+a(u(e)("player.nomination")),1)])),_.value.nomination?h("",!0):(r(),l("li",{key:2,onClick:q[18]||(q[18]=f=>oe())},[w(I,{icon:"vote-yea",class:"fa fa-vote-yea"}),N(" "+a(u(e)("player.specialVote")),1)]))],64)),_.value.isSpectator?(r(),l("li",{key:2,class:z({disabled:t.player.id&&t.player.id!==_.value.playerId}),onClick:pe},[w(I,{icon:"chair",class:"fa fa-chair"}),t.player.id?t.player.id===_.value.playerId?(r(),l(A,{key:1},[N(a(u(e)("player.vacateSeat")),1)],64)):(r(),l(A,{key:2},[N(a(u(e)("player.occupiedSeat")),1)],64)):(r(),l(A,{key:0},[N(a(u(e)("player.claimSeat")),1)],64))],2)):h("",!0)])):h("",!0)]),_:1})],2),t.player.reminders?(r(!0),l(A,{key:0},Q(t.player.reminders,f=>(r(),l("div",{key:f.role+" "+f.name,class:z(["reminder",[f.role]]),onClick:E=>D(f)},[o("span",{class:"icon",style:te({backgroundImage:`url(${f.image&&v.value.isImageOptIn?f.image:V(f.imageAlt||f.role)})`})},null,4),o("span",Dr,a(f.name),1)],10,jr))),128)):h("",!0),o("div",{class:"reminder add",onClick:q[19]||(q[19]=f=>P.$emit("trigger",["openReminderModal"]))},q[20]||(q[20]=[o("span",{class:"icon"},null,-1)])),q[21]||(q[21]=o("div",{class:"reminderHoverTarget"},null,-1))],4)}}}),zr={class:"reminders"},Br=["onClick"],Ar={class:"text"},Hr=ee({__name:"ReminderModal",props:{playerIndex:{}},setup(c){const{t:s}=ie(),e=({id:p,image:m,imageAlt:g})=>b=>({role:p,image:m||"",imageAlt:g||"",name:b,id:`${p}-${b}`}),t=c,n=se(),i=C(()=>n.state.modals),d=C(()=>n.state.grimoire),v=C(()=>n.state.players.players),_=C(()=>{let p=[];const{players:m,bluffs:g}=n.state.players;return n.state.roles.forEach(b=>{m.some(S=>S.role.id===b.id)?p=[...p,...b.reminders.map(e(b))]:g.some(S=>S.id===b.id)&&(p=[...p,...b.reminders.map(e(b))]),b.remindersGlobal&&b.remindersGlobal.length&&(p=[...p,...b.remindersGlobal.map(e(b))])}),n.state.players.fabled.forEach(b=>{p=[...p,...b.reminders.map(e(b))]}),n.state.otherTravelers.forEach(b=>{m.some(S=>S.role.id===b.id)&&(p=[...p,...b.reminders.map(e(b))])}),p.push({id:"good",role:"good",name:s("modal.reminder.good")}),p.push({id:"evil",role:"evil",name:s("modal.reminder.evil")}),p.push({id:"townsfolk",role:"townsfolk",name:s("modal.reminder.townsfolk")}),p.push({id:"outsider",role:"outsider",name:s("modal.reminder.outsider")}),p.push({id:"minion",role:"minion",name:s("modal.reminder.minion")}),p.push({id:"demon",role:"demon",name:s("modal.reminder.demon")}),p.push({id:"custom",role:"custom",name:s("modal.reminder.custom")}),p});function y(p){const m=n.state.players.players[t.playerIndex];let g;if(p.role==="custom"){const b=prompt(s("prompt.customNote"));if(!b)return;g=[...m.reminders,{role:"custom",name:b}]}else g=[...m.reminders,p];n.commit("players/update",{player:m,property:"reminders",value:g}),n.commit("toggleModal","reminder")}function $(p){return new URL(Object.assign({"../../assets/icons/acrobat.png":fe,"../../assets/icons/alchemist.png":he,"../../assets/icons/alhadikhia.png":ye,"../../assets/icons/alsaahir.png":be,"../../assets/icons/amnesiac.png":ke,"../../assets/icons/angel.png":we,"../../assets/icons/apprentice.png":Se,"../../assets/icons/artist.png":$e,"../../assets/icons/assassin.png":Ce,"../../assets/icons/atheist.png":qe,"../../assets/icons/balloonist.png":Ie,"../../assets/icons/banshee.png":Me,"../../assets/icons/barber.png":Oe,"../../assets/icons/barista.png":Ve,"../../assets/icons/baron.png":Ne,"../../assets/icons/beggar.png":Re,"../../assets/icons/bishop.png":xe,"../../assets/icons/boffin.png":Pe,"../../assets/icons/bonecollector.png":Te,"../../assets/icons/boomdandy.png":je,"../../assets/icons/bootlegger.png":De,"../../assets/icons/bountyhunter.png":Ee,"../../assets/icons/buddhist.png":ze,"../../assets/icons/bureaucrat.png":Be,"../../assets/icons/butcher.png":Ae,"../../assets/icons/butler.png":He,"../../assets/icons/cacklejack.png":Le,"../../assets/icons/cannibal.png":Fe,"../../assets/icons/cerenovus.png":Je,"../../assets/icons/chambermaid.png":Ue,"../../assets/icons/chef.png":Ge,"../../assets/icons/choirboy.png":We,"../../assets/icons/clockmaker.png":Ze,"../../assets/icons/courtier.png":Ke,"../../assets/icons/cultleader.png":Qe,"../../assets/icons/custom.png":Xe,"../../assets/icons/damsel.png":Ye,"../../assets/icons/dawn.png":es,"../../assets/icons/demon.png":ss,"../../assets/icons/deusexfiasco.png":ts,"../../assets/icons/deviant.png":ns,"../../assets/icons/devilsadvocate.png":os,"../../assets/icons/djinn.png":is,"../../assets/icons/doomsayer.png":as,"../../assets/icons/dreamer.png":rs,"../../assets/icons/drunk.png":ls,"../../assets/icons/duchess.png":cs,"../../assets/icons/dusk.png":us,"../../assets/icons/empath.png":gs,"../../assets/icons/engineer.png":ps,"../../assets/icons/evil.png":ms,"../../assets/icons/eviltwin.png":ds,"../../assets/icons/exorcist.png":_s,"../../assets/icons/fabled.png":vs,"../../assets/icons/fanggu.png":fs,"../../assets/icons/farmer.png":hs,"../../assets/icons/fearmonger.png":ys,"../../assets/icons/ferryman.png":bs,"../../assets/icons/fibbin.png":ks,"../../assets/icons/fiddler.png":ws,"../../assets/icons/fisherman.png":Ss,"../../assets/icons/flowergirl.png":$s,"../../assets/icons/fool.png":Cs,"../../assets/icons/fortuneteller.png":qs,"../../assets/icons/gambler.png":Is,"../../assets/icons/gangster.png":Ms,"../../assets/icons/gardener.png":Os,"../../assets/icons/general.png":Vs,"../../assets/icons/gnome.png":Ns,"../../assets/icons/goblin.png":Rs,"../../assets/icons/godfather.png":xs,"../../assets/icons/golem.png":Ps,"../../assets/icons/good.png":Ts,"../../assets/icons/goon.png":js,"../../assets/icons/gossip.png":Ds,"../../assets/icons/grandmother.png":Es,"../../assets/icons/gunslinger.png":zs,"../../assets/icons/harlot.png":Bs,"../../assets/icons/harpy.png":As,"../../assets/icons/hatter.png":Hs,"../../assets/icons/hellslibrarian.png":Ls,"../../assets/icons/heretic.png":Fs,"../../assets/icons/hermit.png":Js,"../../assets/icons/highpriestess.png":Us,"../../assets/icons/huntsman.png":Gs,"../../assets/icons/imp.png":Ws,"../../assets/icons/innkeeper.png":Zs,"../../assets/icons/investigator.png":Ks,"../../assets/icons/judge.png":Qs,"../../assets/icons/juggler.png":Xs,"../../assets/icons/kazali.png":Ys,"../../assets/icons/king.png":et,"../../assets/icons/klutz.png":st,"../../assets/icons/knight.png":tt,"../../assets/icons/legion.png":nt,"../../assets/icons/leviathan.png":ot,"../../assets/icons/librarian.png":it,"../../assets/icons/lilmonsta.png":at,"../../assets/icons/lleech.png":rt,"../../assets/icons/lordoftyphon.png":lt,"../../assets/icons/lunatic.png":ct,"../../assets/icons/lycanthrope.png":ut,"../../assets/icons/magician.png":gt,"../../assets/icons/marionette.png":pt,"../../assets/icons/mastermind.png":mt,"../../assets/icons/mathematician.png":dt,"../../assets/icons/matron.png":_t,"../../assets/icons/mayor.png":vt,"../../assets/icons/mephit.png":ft,"../../assets/icons/mezepheles.png":ht,"../../assets/icons/minion.png":yt,"../../assets/icons/minstrel.png":bt,"../../assets/icons/monk.png":kt,"../../assets/icons/moonchild.png":wt,"../../assets/icons/mutant.png":St,"../../assets/icons/nightwatchman.png":$t,"../../assets/icons/noble.png":Ct,"../../assets/icons/nodashii.png":qt,"../../assets/icons/ogre.png":It,"../../assets/icons/ojo.png":Mt,"../../assets/icons/oracle.png":Ot,"../../assets/icons/organgrinder.png":Vt,"../../assets/icons/outsider.png":Nt,"../../assets/icons/pacifist.png":Rt,"../../assets/icons/philosopher.png":xt,"../../assets/icons/pithag.png":Pt,"../../assets/icons/pixie.png":Tt,"../../assets/icons/plaguedoctor.png":jt,"../../assets/icons/plus.png":Dt,"../../assets/icons/po.png":Et,"../../assets/icons/poisoner.png":zt,"../../assets/icons/politician.png":Bt,"../../assets/icons/poppygrower.png":At,"../../assets/icons/preacher.png":Ht,"../../assets/icons/princess.png":Lt,"../../assets/icons/professor.png":Ft,"../../assets/icons/psychopath.png":Jt,"../../assets/icons/pukka.png":Ut,"../../assets/icons/puzzlemaster.png":Gt,"../../assets/icons/ravenkeeper.png":Wt,"../../assets/icons/recluse.png":Zt,"../../assets/icons/revolutionary.png":Kt,"../../assets/icons/riot.png":Qt,"../../assets/icons/sage.png":Xt,"../../assets/icons/sailor.png":Yt,"../../assets/icons/saint.png":en,"../../assets/icons/savant.png":sn,"../../assets/icons/scapegoat.png":tn,"../../assets/icons/scarletwoman.png":nn,"../../assets/icons/seamstress.png":on,"../../assets/icons/sentinel.png":an,"../../assets/icons/shabaloth.png":rn,"../../assets/icons/shugenja.png":ln,"../../assets/icons/slayer.png":cn,"../../assets/icons/snakecharmer.png":un,"../../assets/icons/snitch.png":gn,"../../assets/icons/soldier.png":pn,"../../assets/icons/spiritofivory.png":mn,"../../assets/icons/spy.png":dn,"../../assets/icons/steward.png":_n,"../../assets/icons/stormcatcher.png":vn,"../../assets/icons/summoner.png":fn,"../../assets/icons/sweetheart.png":hn,"../../assets/icons/tealady.png":yn,"../../assets/icons/thief.png":bn,"../../assets/icons/tinker.png":kn,"../../assets/icons/towncrier.png":wn,"../../assets/icons/townsfolk.png":Sn,"../../assets/icons/toymaker.png":$n,"../../assets/icons/traveler.png":Cn,"../../assets/icons/undertaker.png":qn,"../../assets/icons/vigormortis.png":In,"../../assets/icons/villageidiot.png":Mn,"../../assets/icons/virgin.png":On,"../../assets/icons/vizier.png":Vn,"../../assets/icons/vortox.png":Nn,"../../assets/icons/voudon.png":Rn,"../../assets/icons/washerwoman.png":xn,"../../assets/icons/widow.png":Pn,"../../assets/icons/witch.png":Tn,"../../assets/icons/wizard.png":jn,"../../assets/icons/wraith.png":Dn,"../../assets/icons/x.png":En,"../../assets/icons/xaan.png":zn,"../../assets/icons/yaggababble.png":Bn,"../../assets/icons/zealot.png":An,"../../assets/icons/zombuul.png":Hn})[`../../assets/icons/${p}.png`],import.meta.url).href}function M(p){n.commit("toggleModal",p)}return(p,m)=>i.value.reminder&&_.value.length&&v.value[p.playerIndex]?(r(),G(de,{key:0,onClose:m[0]||(m[0]=g=>M("reminder"))},{default:ge(()=>[o("h3",null,a(u(s)("modal.reminder.title")),1),o("ul",zr,[(r(!0),l(A,null,Q(_.value,g=>(r(),l("li",{key:g.role+" "+g.name,class:z(["reminder",[g.role]]),onClick:b=>y(g)},[o("span",{class:"icon",style:te({backgroundImage:`url(${g.image&&d.value.isImageOptIn?g.image:$(g.imageAlt||g.role)})`})},null,4),o("span",Ar,a(g.name),1)],10,Br))),128))])]),_:1})):h("",!0)}}),Lr=ne(Hr,[["__scopeId","data-v-05fa55ec"]]),Fr={key:0,class:"tokens"},Jr=["onClick"],Ur={key:1,class:"tokens"},Gr=["onClick"],Wr={key:2,class:"button-group"},Zr=ee({__name:"RoleModal",props:{playerIndex:{}},setup(c){const{t:s}=ie(),e=c,t=se(),n=K("editionRoles"),i=C(()=>{const p=[],m=t.state.players.players;return t.state.roles.forEach(g=>{(e.playerIndex>=0||e.playerIndex<0&&!m.some(b=>b.role.id===g.id))&&p.push(g)}),p.push({id:"empty",name:"",team:"townsfolk",ability:"",isCustom:!1,edition:"",firstNight:0,otherNight:0,firstNightReminder:"",otherNightReminder:"",reminders:[],remindersGlobal:[],setup:!1,image:"",imageAlt:"",forbidden:!1}),p}),d=C(()=>t.state.modals),v=C(()=>t.state.session),_=C(()=>t.state.players.players),y=C(()=>t.state.otherTravelers),$=p=>{if(e.playerIndex<0)t.commit("players/setBluff",{index:e.playerIndex*-1-1,role:p});else{if(v.value.isSpectator&&p.team==="traveler")return;const m=t.state.players.players[e.playerIndex];t.commit("players/update",{player:m,property:"role",value:p})}n.value="editionRoles",t.commit("toggleModal","role")},M=()=>{n.value="editionRoles",t.commit("toggleModal","role")};return(p,m)=>d.value.role&&i.value.length?(r(),G(de,{key:0,onClose:M},{default:ge(()=>[o("h3",null,a(u(s)("modal.role.title"))+" "+a(p.playerIndex>=0&&_.value.length?_.value[p.playerIndex].name:u(s)("modal.role.bluff")),1),n.value==="editionRoles"||!y.value.size?(r(),l("ul",Fr,[(r(!0),l(A,null,Q(i.value,g=>(r(),l("li",{key:g.id,class:z([g.team]),onClick:b=>$(g)},[w(_e,{role:g},null,8,["role"])],10,Jr))),128))])):h("",!0),n.value==="otherTravelers"&&y.value.size?(r(),l("ul",Ur,[(r(!0),l(A,null,Q(y.value.values(),g=>(r(),l("li",{key:g.id,class:z([g.team]),onClick:b=>$(g)},[w(_e,{role:g},null,8,["role"])],10,Gr))),128))])):h("",!0),p.playerIndex>=0&&y.value.size&&!v.value.isSpectator?(r(),l("div",Wr,[o("span",{class:z(["button",{townsfolk:n.value==="editionRoles"}]),onClick:m[0]||(m[0]=g=>n.value="editionRoles")},a(u(s)("modal.role.editionRoles")),3),o("span",{class:z(["button",{townsfolk:n.value==="otherTravelers"}]),onClick:m[1]||(m[1]=g=>n.value="otherTravelers")},a(u(s)("modal.role.otherTravelers")),3)])):h("",!0)]),_:1})):h("",!0)}}),Kr=ne(Zr,[["__scopeId","data-v-f15a0484"]]),Qr={key:0},Xr={key:1},Yr=["onClick"],el={class:"button-group"},sl={key:0,class:"button-group"},tl={key:1,class:"button-group"},nl={class:"button-group"},ol={class:"button-group"},il=["onClick"],al={key:0,class:"night-order first"},rl={key:0},ll={key:1,class:"night-order other"},cl={key:0},ul=ee({__name:"TownSquare",setup(c){Wo(T=>({"4f6ed92d":$.value,f7bafe66:M.value}));const s=se(),{t:e}=ie(),t=C(()=>s.getters["players/nightOrder"]),n=C(()=>s.state.grimoire),i=C(()=>s.state.session),d=C(()=>s.state.players.players),v=C(()=>s.state.players.bluffs),_=C(()=>s.state.players.fabled),y=C(()=>Y(i.value.nomination)?!!i.value.nomination.specialVote?.timerText:!1),$=C(()=>JSON.stringify(e("modal.nightOrder.firstNight"))),M=C(()=>JSON.stringify(e("modal.nightOrder.otherNights"))),p=K(0),m=K(3),g=K(-1),b=K(-1),S=K(-1),k=K(!0),D=K(!0),V=K(!1),O=K("Timer"),j=K(1),L=K(!1),W=K(null),J=()=>{k.value=!k.value},oe=()=>{D.value=!D.value},re=()=>{V.value=!V.value},pe=T=>{i.value.isSpectator||s.commit("players/setFabled",{index:T})},ae=()=>{s.commit("toggleNight"),n.value.isNight?s.commit("session/setMarkedPlayer",-1):(s.commit("toggleRooster",!0),setTimeout(()=>s.commit("toggleRooster",!1),4e3))},P=()=>{s.commit("toggleRinging",!0),setTimeout(()=>s.commit("toggleRinging",!1),4e3)},q=(T,x)=>{const[U,B]=Array.isArray(x)?[x[0],x[1]]:[x,void 0],X={claimSeat:I,openReminderModal:f,openRoleModal:E,removePlayer:R,swapPlayer:H,movePlayer:F,nominatePlayer:Ln,toggleBluffs:J,toggleFabled:oe,toggleTimeControls:re,removeFabled:pe,toggleNight:ae,toggleRinging:P,renameTimer:Gn,setDaytimeTimer:Fn,setNominationTimer:Qn,setDuskTimer:Xn,setAccusationTimer:Yn,setDefenseTimer:eo,setDebateTimer:so,setSpecialVoteTimer:to,setSpecialDebateTimer:no,setTimer:oo,startTimer:io,stopTimer:Wn};typeof X[U]=="function"&&X[U](T,B)},I=T=>{i.value.isSpectator&&(i.value.playerId===d.value[T].id?s.commit("session/claimSeat",-1):s.commit("session/claimSeat",T))},f=T=>{p.value=T,s.commit("toggleModal","reminder")},E=T=>{const x=d.value[T];i.value.isSpectator&&x&&x.role.team==="traveler"||(p.value=T,s.commit("toggleModal","role"))},R=T=>{if(i.value.isSpectator||i.value.lockedVote||!confirm(`Do you really want to remove ${d.value[T].name}?`))return;const{nomination:x}=i.value;x&&(x.includes(T)?s.commit("session/nomination"):(x.nominator>T||x.nominee>T)&&s.commit("session/setNomination",[x.nominator>T?x.nominator-1:x.nominator,x.nominee>T?x.nominee-1:x.nominee])),s.commit("players/remove",T)},H=(T,x)=>{if(!(i.value.isSpectator||i.value.lockedVote))if(x===void 0)Z(),g.value=T;else{if(i.value.nomination){const U=d.value.indexOf(x),B=i.value.nomination.map(X=>X===g.value?U:X===U?g.value:X);(i.value.nomination.nominator!==B.nominator||i.value.nomination.nominee!==B.nominee)&&s.commit("session/setNomination",B)}s.commit("players/swap",[g.value,d.value.indexOf(x)]),Z()}},F=(T,x)=>{if(!(i.value.isSpectator||i.value.lockedVote))if(x===void 0)Z(),b.value=T;else{if(i.value.nomination){const U=d.value.indexOf(x),B=i.value.nomination.map(X=>X===b.value?U:X>b.value&&X<=U?X-1:X<b.value&&X>=U?X+1:X);(i.value.nomination.nominator!==B.nominator||i.value.nomination.nominee!==B.nominee)&&s.commit("session/setNomination",B)}s.commit("players/move",[b.value,d.value.indexOf(x)]),Z()}},Ln=(T,x)=>{if(!(i.value.isSpectator||i.value.lockedVote))if(x===void 0)Z(),T!==S.value&&(S.value=T);else{const U={nominator:S.value,nominee:d.value.indexOf(x)};s.commit("session/nomination",{nomination:U}),Z()}},Z=()=>{b.value=-1,g.value=-1,S.value=-1},Gn=()=>{let T=prompt(e("townsquare.timer.prompt.name"),O.value);T===""&&(T=e("townsquare.timer.default.text")),T&&(O.value=T.trim())},Fn=()=>{j.value=8,O.value=e("townsquare.timer.daytime.text")},Qn=()=>{j.value=2,O.value=e("townsquare.timer.nominations.text")},Xn=()=>{j.value=1,O.value=e("townsquare.timer.dusk.text")},Yn=()=>{if(!Y(i.value.nomination))return;j.value=1;const T=i.value.nomination;let x=e("townsquare.timer.accusation.text");const U=typeof T.nominator=="number"?d.value[T.nominator]?.name||"":typeof T.nominator=="string"?T.nominator.charAt(0).toUpperCase()+T.nominator.slice(1):"",B=typeof T.nominee=="number"?d.value[T.nominee]?.name||"":T.nominee||"";x=x.replace("$accusator",U).replace("$accusee",B),O.value=x},eo=()=>{if(!Y(i.value.nomination))return;j.value=1;const T=i.value.nomination;let x=e("townsquare.timer.defense.text");const U=typeof T.nominee=="number"?d.value[T.nominee]?.name||"":typeof T.nominee=="string"?T.nominee.charAt(0).toUpperCase()+T.nominee.slice(1):"",B=typeof T.nominator=="number"?d.value[T.nominator]?.name||"":T.nominator||"";x=x.replace("$accusee",U).replace("$accusator",B),O.value=x},so=()=>{if(!Y(i.value.nomination))return;j.value=2;const T=i.value.nomination;let x=e("townsquare.timer.debate.text");const U=typeof T.nominee=="number"?d.value[T.nominee]?.name||"":T.nominee||"";x=x.replace("$accusee",U),O.value=x},to=()=>{if(!Y(i.value.nomination))return;j.value=1;const T=i.value.nomination,x=typeof T.nominator=="number"?d.value[T.nominator]?.name||"":T.nominator||"",U=T.specialVote?.timerText||"",B=`${x} ${U}`;O.value=B},no=()=>{if(!Y(i.value.nomination))return;j.value=2;const T=i.value.nomination;let x=T.specialVote?.debateText||"";const U=typeof T.nominator=="number"?d.value[T.nominator]?.name||"":T.nominator||"";x=x.replace("$player",U),O.value=x},oo=()=>{let T=prompt(e("townsquare.timer.prompt.duration"));if(isNaN(Number(T)))return alert(e("townsquare.timer.prompt.durationError"));Number(T)>0&&(j.value=Number(T))},io=()=>{let T={name:O.value,duration:j.value*60};s.commit("setTimer",T),L.value=!0,W.value=setTimeout(Wn,T.duration*1e3)},Wn=()=>{s.commit("setTimer",{}),L.value=!1,W.value&&clearTimeout(W.value)};return(T,x)=>{const U=ue("font-awesome-icon");return r(),l("div",{id:"townsquare",class:z(["square",{public:n.value.isPublic,spectator:i.value.isSpectator,vote:i.value.nomination}])},[o("ul",{class:z(["circle",["size-"+d.value.length]])},[(r(!0),l(A,null,Q(d.value,(B,X)=>(r(),G(Er,{key:X,player:B,class:z({from:Math.max(g.value,b.value,S.value)===X,swap:g.value>-1,move:b.value>-1,nominate:S.value>-1}),onTrigger:ao=>q(X,ao)},null,8,["player","class","onTrigger"]))),128))],2),d.value.length?(r(),l("div",{key:0,ref_key:"bluffs",ref:v,class:z(["bluffs",{closed:!k.value}])},[o("h3",null,[i.value.isSpectator?(r(),l("span",Qr,a(u(e)("townsquare.others")),1)):(r(),l("span",Xr,a(u(e)("townsquare.bluffs")),1)),w(U,{icon:"times-circle",class:"fa fa-times-circle",onClick:ce(J,["stop"])}),w(U,{icon:"plus-circle",class:"fa fa-plus-circle",onClick:ce(J,["stop"])})]),o("ul",null,[(r(!0),l(A,null,Q(m.value,B=>(r(),l("li",{key:B,onClick:X=>E(B*-1)},[w(_e,{role:v.value[B-1]},null,8,["role"])],8,Yr))),128))])],2)):h("",!0),i.value.isSpectator?h("",!0):(r(),l("div",{key:1,ref:"storytelling",class:z(["storytelling",{closed:!V.value}])},[o("h3",null,[o("span",null,a(u(e)("townsquare.storytellerTools")),1),w(U,{icon:"times-circle",class:"fa fa-times-circle",onClick:ce(re,["stop"])}),w(U,{icon:"plus-circle",class:"fa fa-plus-circle",onClick:ce(re,["stop"])})]),o("div",el,[o("div",{class:"button",onClick:x[0]||(x[0]=B=>oo())},"  "+a(j.value)+" min ",1),o("div",{class:"button",onClick:x[1]||(x[1]=B=>Gn())},"  "+a(O.value),1),o("div",{class:z(["button demon",{disabled:!L.value}]),onClick:x[2]||(x[2]=B=>Wn())},"  ",2),o("div",{class:z(["button townfolk",{disabled:L.value}]),onClick:x[3]||(x[3]=B=>io())},"  ",2)]),i.value.nomination?(r(),l("div",sl,[y.value?(r(),l("div",{key:1,class:"button",onClick:x[5]||(x[5]=B=>to())},a(i.value.nomination.specialVote?.buttonLabel||i.value.nomination.specialVote?.type||"Special Vote"),1)):(r(),l("div",{key:0,class:"button",onClick:x[4]||(x[4]=B=>Yn())},a(u(e)("townsquare.timer.accusation.button")),1)),y.value?h("",!0):(r(),l("div",{key:2,class:"button",onClick:x[6]||(x[6]=B=>eo())},a(u(e)("townsquare.timer.defense.button")),1)),y.value?(r(),l("div",{key:4,class:"button",onClick:x[8]||(x[8]=B=>no())},a(u(e)("townsquare.timer.debate.button")),1)):(r(),l("div",{key:3,class:"button",onClick:x[7]||(x[7]=B=>so())},a(u(e)("townsquare.timer.debate.button")),1))])):(r(),l("div",tl,[o("div",{class:"button",onClick:x[9]||(x[9]=B=>Fn())},a(u(e)("townsquare.timer.daytime.button")),1),o("div",{class:"button",onClick:x[10]||(x[10]=B=>Qn())},a(u(e)("townsquare.timer.nominations.button")),1),o("div",{class:"button",onClick:x[11]||(x[11]=B=>Xn())},a(u(e)("townsquare.timer.dusk.button")),1)])),o("div",nl,[o("div",{class:z(["button",{disabled:n.value.isNight}]),onClick:x[12]||(x[12]=B=>ae())},"  ",2),o("div",{class:z(["button",{disabled:!n.value.isNight}]),onClick:x[13]||(x[13]=B=>ae())},"  ",2)]),o("div",ol,[o("div",{class:"button",onClick:x[14]||(x[14]=B=>P())},[w(U,{icon:["fas","bell"]})])])],2)),_.value.length?(r(),l("div",{key:2,class:z(["fabled",{closed:!D.value}])},[o("h3",null,[o("span",null,a(u(e)("townsquare.fabled")),1),w(U,{icon:"times-circle",class:"fa fa-times-circle",onClick:ce(oe,["stop"])}),w(U,{icon:"plus-circle",class:"fa fa-plus-circle",onClick:ce(oe,["stop"])})]),o("ul",null,[(r(!0),l(A,null,Q(_.value,(B,X)=>(r(),l("li",{key:X,onClick:ao=>pe(X)},[t.value.get(B).first&&(n.value.isNightOrder||!i.value.isSpectator)?(r(),l("div",al,[o("em",null,a(t.value.get(B).first)+".",1),B.firstNightReminder?(r(),l("span",rl,a(B.firstNightReminder),1)):h("",!0)])):h("",!0),t.value.get(B).other&&(n.value.isNightOrder||!i.value.isSpectator)?(r(),l("div",ll,[o("em",null,a(t.value.get(B).other)+".",1),B.otherNightReminder?(r(),l("span",cl,a(B.otherNightReminder),1)):h("",!0)])):h("",!0),w(_e,{role:B},null,8,["role"])],8,il))),128))])],2)):h("",!0),w(Lr,{"player-index":p.value},null,8,["player-index"]),w(Kr,{"player-index":p.value},null,8,["player-index"])],2)}}}),gl={id:"vote"},pl={class:"arrows"},ml={class:"overlay"},dl={class:"blue"},_l={key:0},vl={key:1,class:"blue"},fl={key:2,class:"blue"},hl={key:3},yl={key:4},bl={key:0,class:"orange"},kl={key:1},wl={class:"button-group"},Sl={key:2,class:"button-group mark"},$l={key:0},Cl={class:"button-group"},ql={key:7},Il={key:0,class:"countdown"},Ml=["autoplay","muted"],Ol=ee({__name:"Vote",setup(c){const s=se(),{t:e}=ie(),t=C(()=>s.state.players.players),n=C(()=>s.state.session),i=C(()=>s.state.grimoire),d=C(()=>s.getters["players/alive"]),v=K(null),_=C(()=>{if(!Y(n.value.nomination))return null;const I=n.value.nomination.nominator;return typeof I=="number"&&t.value[I]||null}),y=C(()=>{if(!Y(n.value.nomination))return{};const I=t.value.length,f=n.value.nomination.nominator;if(typeof f!="number")return{};if($.value)return{transform:`rotate(${Math.round(f/I*360)}deg)`,transitionDuration:n.value.votingSpeed-100+"ms"};{const E=n.value.lockedVote,R=360*(f+Math.min(E,I))/I;return{transform:`rotate(${Math.round(R)}deg)`,transitionDuration:n.value.votingSpeed-100+"ms"}}}),$=C(()=>{if(!Y(n.value.nomination))return null;const I=n.value.nomination.nominee;return typeof I=="number"&&t.value[I]||null}),M=C(()=>{if(!Y(n.value.nomination))return{};const I=t.value.length,f=n.value.nomination.nominee;if(typeof f!="number")return{};const E=n.value.lockedVote,R=360*(f+Math.min(E,I))/I;return{transform:`rotate(${Math.round(R)}deg)`,transitionDuration:n.value.votingSpeed-100+"ms"}}),p=C(()=>Y(n.value.nomination)?n.value.nomination.nominee===null||$.value?.role.team==="traveler":!1),m=C(()=>t.value.find(I=>I.id===n.value.playerId)),g=C(()=>{const I=t.value.findIndex(f=>f.id===n.value.playerId);return I>=0?!!n.value.votes[I]:void 0}),b=C(()=>{if(!Y(n.value.nomination))return"";if(_.value)return _.value.name;const I=n.value.nomination.nominator;return typeof I=="string"?I.charAt(0).toUpperCase()+I.slice(1):""}),S=C(()=>{if(!Y(n.value.nomination))return"";if($.value)return $.value.name;const I=n.value.nomination.nominee;return typeof I=="string"?I.charAt(0).toUpperCase()+I.slice(1):""}),k=C(()=>{if(!Y(n.value.nomination))return"";const I=n.value.nomination;return I.specialVote?.timerText?I.specialVote.timerText:$.value?.role?.team==="traveler"?e("vote.callexile"):e("vote.nominates")}),D=C(()=>Y(n.value.nomination)?!!n.value.nomination.specialVote?.timerText:!1),V=C(()=>{for(const I of t.value)if(I.role.id=="voudon")return!I.isDead;return!1}),O=C(()=>{if(!m.value||!Y(n.value.nomination))return!1;const I=n.value.nomination;if((m.value.isDead||m.value.role.id=="beggar")&&!m.value.voteToken&&!p.value&&!V.value||!m.value.isDead&&V.value&&!p.value)return!1;const f=n.value,E=t.value.length,R=t.value.indexOf(m.value);let H;return $.value&&typeof I.nominee=="number"?H=I.nominee:typeof I.nominator=="number"?H=I.nominator:H=0,(R-1+E-H)%E>=f.lockedVote-1}),j=C(()=>{if(!Y(n.value.nomination))return[];const I=n.value.nomination;let f;$.value&&typeof I.nominee=="number"?f=I.nominee:typeof I.nominator=="number"?f=I.nominator:f=0;const E=Array(t.value.length).fill("").map((H,F)=>n.value.votes[F]?t.value[F].name:""),R=[...E.slice(f+1),...E.slice(0,f+1)];return(n.value.lockedVote?R.slice(0,n.value.lockedVote-1):R).filter(H=>!!H)}),L=()=>{s.commit("session/lockVote",0),s.commit("session/setVoteInProgress",!0),v.value=setInterval(()=>{W()},4e3)},W=()=>{s.commit("session/lockVote",1),s.commit("session/setVoteInProgress",!0),v.value&&clearInterval(v.value),v.value=setInterval(()=>{s.commit("session/lockVote"),n.value.lockedVote>t.value.length&&(v.value&&clearInterval(v.value),s.commit("session/setVoteInProgress",!1))},n.value.votingSpeed)},J=()=>{v.value?(clearInterval(v.value),v.value=null):v.value=setInterval(()=>{s.commit("session/lockVote"),n.value.lockedVote>t.value.length&&(v.value&&clearInterval(v.value),s.commit("session/setVoteInProgress",!1))},n.value.votingSpeed)},oe=()=>{v.value&&clearInterval(v.value),v.value=null,s.commit("session/setVoteInProgress",!1),s.commit("session/lockVote",0)},re=()=>{v.value&&clearInterval(v.value),s.commit("session/addHistory",{players:t.value,isOrganVoteMode:i.value.isOrganVoteMode,localeTexts:{exile:e("modal.voteHistory.exile"),execution:e("modal.voteHistory.execution")}}),s.commit("session/nomination")},pe=I=>{if(!O.value)return!1;const f=t.value.findIndex(E=>E.id===n.value.playerId);return f>=0&&!!n.value.votes[f]!==I?(s.commit("session/voteSync",[f,I]),!0):!1},ae=I=>{const f=Math.round(n.value.votingSpeed+I);f>=0&&s.commit("session/setVotingSpeed",f)},P=()=>{s.commit("session/setMarkedPlayer",n.value.nomination.nominee)},q=()=>{s.commit("session/setMarkedPlayer",-1)};return Zo(()=>{v.value&&clearInterval(v.value)}),(I,f)=>{const E=ue("font-awesome-icon");return r(),l("div",gl,[o("div",pl,[$.value?(r(),l("span",{key:0,class:"nominee",style:te(M.value)},null,4)):h("",!0),_.value?(r(),l("span",{key:1,class:"nominator",style:te(y.value)},null,4)):h("",!0)]),o("div",ml,[f[5]||(f[5]=o("audio",{preload:"auto"},[o("source",{src:Un})],-1)),o("em",dl,a(b.value),1),N(" "+a(k.value)+" ",1),D.value?h("",!0):(r(),l("em",_l,a(S.value),1)),N(" "+a(u(e)("vote.exclam"))+" ",1),f[6]||(f[6]=o("br",null,null,-1)),!i.value.isOrganVoteMode||$.value&&$.value.role.team=="traveler"||!n.value.isSpectator?(r(),l("em",vl,a(j.value?.length)+" "+a(u(e)("vote.votes")),1)):(r(),l("em",fl," ? "+a(u(e)("vote.votes")),1)),N(" "+a(u(e)("vote.inFavor"))+" ",1),$.value&&$.value.role.team!=="traveler"||n.value.nomination&&typeof n.value.nomination.nominee=="string"?(r(),l("em",hl," ("+a(u(e)("vote.majorityIs"))+" "+a(Math.ceil(d.value/2))+") ",1)):$.value?(r(),l("em",yl," ("+a(u(e)("vote.majorityIs"))+" "+a(Math.ceil(t.value.length/2))+") ",1)):h("",!0),n.value.isSpectator?O.value?(r(),l(A,{key:6},[n.value.isVoteInProgress?h("",!0):(r(),l("div",$l,a(n.value.votingSpeed/1e3)+" "+a(u(e)("vote.secondsBetweenVotes")),1)),o("div",Cl,[o("div",{class:z(["button townsfolk",{disabled:!g.value}]),onClick:f[2]||(f[2]=R=>pe(!1))},a(u(e)("vote.handDown")),3),o("div",{class:z(["button demon",{disabled:g.value}]),onClick:f[3]||(f[3]=R=>pe(!0))},a(u(e)("vote.handUp")),3)])],64)):m.value?h("",!0):(r(),l("div",ql,a(u(e)("vote.seatToVote")),1)):(r(),l(A,{key:5},[f[4]||(f[4]=o("br",null,null,-1)),i.value.isOrganVoteMode&&($.value&&$.value.role.team!=="traveler"||n.value.nomination&&typeof n.value.nomination.nominee=="string")?(r(),l("em",bl,a(u(e)("vote.secretBallot")),1)):h("",!0),!n.value.isVoteInProgress&&n.value.lockedVote<1?(r(),l("div",kl,[N(a(u(e)("vote.timePerPlayer"))+" ",1),w(E,{icon:"minus-circle",class:"fa fa-minus-circle",onMousedown:f[0]||(f[0]=ce(R=>ae(-250),["prevent"]))}),N(" "+a(n.value.votingSpeed/1e3)+"s ",1),w(E,{icon:"plus-circle",class:"fa fa-plus-circle",onMousedown:f[1]||(f[1]=ce(R=>ae(250),["prevent"]))})])):h("",!0),o("div",wl,[n.value.isVoteInProgress?h("",!0):(r(),l("div",{key:0,class:"button townsfolk",onClick:L},a(u(e)("vote.countdown")),1)),n.value.isVoteInProgress?(r(),l(A,{key:2},[o("div",{class:z(["button townsfolk",{disabled:!n.value.lockedVote}]),onClick:J},a(v.value?u(e)("vote.pause"):u(e)("vote.resume")),3),o("div",{class:"button",onClick:oe},a(u(e)("vote.reset")),1)],64)):(r(),l("div",{key:1,class:"button",onClick:W},a(n.value.lockedVote?u(e)("vote.restart"):u(e)("vote.start")),1)),o("div",{class:"button demon",onClick:re},a(u(e)("vote.close")),1)]),!D.value&&(!$.value||$.value.role.team!=="traveler")?(r(),l("div",Sl,[o("div",{class:z(["button",{disabled:n.value.nomination?.nominee===n.value.markedPlayer}]),onClick:P},a(u(e)("vote.setMarked")),3),o("div",{class:"button",onClick:q},a(u(e)("vote.removeMarked")),1)])):h("",!0)],64)),i.value.timer.duration?(r(),G(jo,{key:8,"timer-name":i.value.timer.name,"timer-duration":i.value.timer.duration},null,8,["timer-name","timer-duration"])):h("",!0)]),n.value.isVoteInProgress&&!n.value.lockedVote?(r(),l("div",Il,[f[8]||(f[8]=o("span",null,"3",-1)),f[9]||(f[9]=o("span",null,"2",-1)),f[10]||(f[10]=o("span",null,"1",-1)),o("span",null,a(u(e)("vote.doVote")),1),o("audio",{autoplay:!i.value.isMuted,muted:i.value.isMuted},f[7]||(f[7]=[o("source",{src:Un},null,-1)]),8,Ml)])):h("",!0)])}}}),Vl=ne(Ol,[["__scopeId","data-v-ef005d32"]]),Nl=["src"],Rl={id:"version"},xl=ee({__name:"App",setup(c){const s=se(),e=Yo.version,t=K(null),n=C(()=>s.state.grimoire),i=C(()=>s.state.session),d=C(()=>s.state.edition),v=C(()=>s.state.players.players),_=C(()=>n.value.isStreamerMode?"none":n.value.background||d.value.background||"none"),y=C(()=>n.value.isStreamerMode?"#000000":"transparent");function $({key:M,ctrlKey:p,metaKey:m}){if(!(p||m))switch(M.toLocaleLowerCase()){case"g":s.commit("toggleGrimoire");break;case"a":t.value?.addPlayer();break;case"h":t.value?.hostSession();break;case"j":t.value?.joinSession();break;case"r":s.commit("toggleModal","reference");break;case"n":s.commit("toggleModal","nightOrder");break;case"e":if(i.value.isSpectator)return;s.commit("toggleModal","edition");break;case"c":if(i.value.isSpectator)return;s.commit("toggleModal","roles");break;case"v":(i.value.voteHistory.length||!i.value.isSpectator)&&s.commit("toggleModal","voteHistory");break;case"s":if(i.value.isSpectator)return;t.value?.toggleNight();break;case"b":if(i.value.isSpectator)return;t.value?.toggleRinging();break;case"escape":s.commit("toggleModal")}}return(M,p)=>(r(),l("div",{id:"app",tabindex:"-1",class:z({night:n.value.isNight,static:n.value.isStatic}),style:te({backgroundImage:`url('${_.value}')`,backgroundColor:`${y.value}`}),onKeyup:$},[_.value&&_.value.match(/\.(mp4|webm)$/i)?(r(),l("video",{key:0,id:"background",src:_.value,autoplay:"",loop:""},null,8,Nl)):h("",!0),p[0]||(p[0]=o("div",{class:"backdrop"},null,-1)),v.value.length?h("",!0):(r(),G(li,{key:1})),v.value.length&&!i.value.nomination?(r(),G(Ir,{key:2})):h("",!0),i.value.nomination?(r(),G(Vl,{key:3})):h("",!0),w(ul),w(Ci,{ref_key:"menuRef",ref:t},null,512),w(Ki),w(ea),w(za),w(Ra),w(ya),w(ur),w(oa),w(Xa),w(ni),o("span",Rl,"v"+a(u(e)),1)],38))}}),Pl="modulepreload",Tl=function(c){return"/townsquare/"+c},lo={},Do=function(s,e,t){let n=Promise.resolve();if(e&&e.length>0){let d=function(y){return Promise.all(y.map($=>Promise.resolve($).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),_=v?.nonce||v?.getAttribute("nonce");n=d(e.map(y=>{if(y=Tl(y),y in lo)return;lo[y]=!0;const $=y.endsWith(".css"),M=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${M}`))return;const p=document.createElement("link");if(p.rel=$?"stylesheet":Pl,$||(p.as="script"),p.crossOrigin="",p.href=y,_&&p.setAttribute("nonce",_),document.head.appendChild(p),$)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${y}`)))})}))}function i(d){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=d,window.dispatchEvent(v),!v.defaultPrevented)throw d}return n.then(d=>{for(const v of d||[])v.status==="rejected"&&i(v.reason);return s().catch(i)})},jl={};class Dl{_wss;_socket;_isSpectator;_gamestate;_store;_pingInterval;_pingTimer;_reconnectTimer;_players;_pings;constructor(s){this._wss=jl.VITE_SERVER_URL||"wss://live.clocktower.online:8080/",this._socket=null,this._isSpectator=!0,this._gamestate=[],this._store=s,this._pingInterval=30*1e3,this._pingTimer=null,this._reconnectTimer=null,this._players={},this._pings={},this._store.state.session.sessionId&&this.connect(this._store.state.session.sessionId)}_open(s){this.disconnect(),this._socket=new WebSocket(this._wss+s+"/"+(this._isSpectator?this._store.state.session.playerId:"host")),this._socket.addEventListener("message",this._handleMessage.bind(this)),this._socket.onopen=this._onOpen.bind(this),this._socket.onclose=e=>{this._socket=null,this._pingTimer&&clearInterval(this._pingTimer),this._pingTimer=null,e.code!==1e3?(this._store.commit("session/setReconnecting",!0),this._reconnectTimer=setTimeout(()=>this.connect(s),3*1e3)):(this._store.commit("session/setSessionId",""),e.reason&&alert(e.reason))}}_send(s,e){this._socket&&this._socket.readyState===1&&this._socket.send(JSON.stringify([s,e]))}_sendDirect(s,e,t){s?this._send("direct",{[s]:[e,t]}):this._send(e,t)}_onOpen(){this._isSpectator?this._sendDirect("host","getGamestate",this._store.state.session.playerId):this.sendGamestate(),this._ping()}_ping(){this._handlePing(),this._send("ping",[this._isSpectator?this._store.state.session.playerId:Object.keys(this._players).length,"latency"]),this._pingTimer&&clearTimeout(this._pingTimer),this._pingTimer=setTimeout(this._ping.bind(this),this._pingInterval)}_handleMessage({data:s}){let e="",t;try{[e,t]=JSON.parse(s)}catch(n){console.log("unsupported socket message",n,s);return}switch(e){case"getGamestate":this.sendGamestate(t,!1);break;case"edition":this._updateEdition(t);break;case"fabled":this._updateFabled(t);break;case"gs":this._updateGamestate(t);break;case"player":this._updatePlayer(t);break;case"claim":this._updateSeat(t);break;case"ping":this._handlePing(t);break;case"nomination":if(!this._isSpectator)return;t||this._store.commit("session/addHistory",{players:this._store.state.players.players,isOrganVoteMode:this._store.state.grimoire.isOrganVoteMode,localeTexts:{exile:this._store.getters.t("modal.voteHistory.exile"),execution:this._store.getters.t("modal.voteHistory.execution")}}),this._store.commit("session/nomination",{nomination:t});break;case"swap":if(!this._isSpectator)return;this._store.commit("players/swap",t);break;case"move":if(!this._isSpectator)return;this._store.commit("players/move",t);break;case"remove":if(!this._isSpectator)return;this._store.commit("players/remove",t);break;case"marked":if(!this._isSpectator)return;this._store.commit("session/setMarkedPlayer",t);break;case"isNight":if(!this._isSpectator)return;this._store.commit("toggleNight",!!t);break;case"isOrganVoteMode":if(!this._isSpectator)return;this._store.commit("toggleOrganVoteMode",t);break;case"isRinging":if(!this._isSpectator)return;this._store.commit("toggleRinging",t);break;case"isRooster":if(!this._isSpectator)return;this._store.commit("toggleRooster",t);break;case"setTimer":if(!this._isSpectator)return;this._store.commit("setTimer",t);break;case"isVoteHistoryAllowed":if(!this._isSpectator)return;this._store.commit("session/setVoteHistoryAllowed",t),this._store.commit("session/clearVoteHistory");break;case"votingSpeed":if(!this._isSpectator)return;this._store.commit("session/setVotingSpeed",t);break;case"clearVoteHistory":if(!this._isSpectator)return;this._store.commit("session/clearVoteHistory");break;case"isVoteInProgress":if(!this._isSpectator)return;this._store.commit("session/setVoteInProgress",t);break;case"vote":this._handleVote(t);break;case"lock":this._handleLock(t);break;case"bye":this._handleBye(t);break;case"pronouns":this._updatePlayerPronouns(t);break}}connect(s){this._store.state.session.playerId||this._store.commit("session/setPlayerId",Math.random().toString(36).substr(2)),this._pings={},this._store.commit("session/setPlayerCount",0),this._store.commit("session/setPing",0),this._isSpectator=this._store.state.session.isSpectator,this._open(s)}disconnect(){this._pings={},this._store.commit("session/setPlayerCount",0),this._store.commit("session/setPing",0),this._store.commit("session/setReconnecting",!1),this._reconnectTimer&&clearTimeout(this._reconnectTimer),this._socket&&(this._isSpectator&&this._sendDirect("host","bye",this._store.state.session.playerId),this._socket.close(1e3),this._socket=null)}sendGamestate(s="",e=!1){if(!this._isSpectator)if(this._gamestate=this._store.state.players.players.map(t=>({name:t.name,id:t.id,isDead:t.isDead,voteToken:t.voteToken,pronouns:t.pronouns,...t.role&&t.role.team==="traveler"?{roleId:t.role.id}:{}})),e)this._sendDirect(s,"gs",{gamestate:this._gamestate,isLightweight:e});else{const{session:t,grimoire:n}=this._store.state,{fabled:i}=this._store.state.players;this.sendEdition(s),this._sendDirect(s,"gs",{gamestate:this._gamestate,isNight:n.isNight,isRinging:n.isRinging,isRooster:n.isRooster,timer:n.timer,isVoteHistoryAllowed:t.isVoteHistoryAllowed,isOrganVoteMode:n.isOrganVoteMode,nomination:t.nomination,votingSpeed:t.votingSpeed,lockedVote:t.lockedVote,isVoteInProgress:t.isVoteInProgress,markedPlayer:t.markedPlayer,fabled:i.map(d=>d.isCustom?d:{id:d.id}),...t.nomination?{votes:t.votes}:{}})}}_updateGamestate(s){if(!this._isSpectator)return;const{gamestate:e,isLightweight:t,isNight:n,isVoteHistoryAllowed:i,isRinging:d,isOrganVoteMode:v,timer:_,nomination:y,votingSpeed:$,votes:M,lockedVote:p,isVoteInProgress:m,markedPlayer:g,fabled:b}=s,S=this._store.state.players.players;if(S.length<e.length)for(let k=S.length;k<e.length;k++)this._store.commit("players/add",String(e[k]?.name??""));else if(S.length>e.length)for(let k=S.length;k>e.length;k--)this._store.commit("players/remove",k-1);e.forEach((k,D)=>{const O=this._store.state.players.players[D],{roleId:j}=k;if(["name","id","isDead","voteToken","pronouns"].forEach(L=>{const W=k[L];O&&O[L]!==W&&this._store.commit("players/update",{player:O,property:L,value:W})}),O&&j&&O.role.id!==j){const L=this._store.state.roles.get(j)||this._store.getters.rolesJSONbyId.get(j);L&&this._store.commit("players/update",{player:O,property:"role",value:L})}else O&&!j&&O.role.team==="traveler"&&this._store.commit("players/update",{player:O,property:"role",value:{}})}),t||(this._store.commit("timer",_),this._store.commit("toggleRinging",!!d),this._store.commit("toggleNight",!!n),this._store.commit("session/setVoteHistoryAllowed",i),this._store.commit("toggleOrganVoteMode",!!v),this._store.commit("session/nomination",{nomination:y,votes:M,votingSpeed:$,lockedVote:p,isVoteInProgress:m}),this._store.commit("session/setMarkedPlayer",g),this._store.commit("players/setFabled",{fabled:b.map(k=>this._store.state.fabled.get(k.id)||k)}))}sendEdition(s=""){if(this._isSpectator)return;const{edition:e}=this._store.state;let t;e&&!e.isOfficial&&(t=this._store.getters.customRolesStripped),this._sendDirect(s,"edition",{edition:e&&e.isOfficial?{id:e.id}:e,...t?{roles:t}:{}})}_updateEdition({edition:s,roles:e}){if(this._isSpectator&&(this._store.commit("setEdition",s),e&&(this._store.commit("setCustomRoles",e),this._store.state.roles.size!==e.length))){const t=[];e.forEach(n=>{const i=n.id||n.id;this._store.state.roles.get(i)||t.push(i)}),alert(`This session contains custom characters that can't be found. Please load them before joining! Missing roles: ${t.join(", ")}`),this.disconnect(),this._store.commit("toggleModal","edition")}}sendFabled(){if(this._isSpectator)return;const{fabled:s}=this._store.state.players;this._send("fabled",s.map(e=>e.isCustom?e:{id:e.id}))}_updateFabled(s){this._isSpectator&&this._store.commit("players/setFabled",{fabled:s.map(e=>this._store.state.fabled.get(e.id)||e)})}sendPlayer({player:s,property:e,value:t}){if(this._isSpectator||e==="reminders")return;const n=this._store.state.players.players.indexOf(s);if(e==="role"){const i=t;i.team&&i.team==="traveler"?(this._gamestate[n]&&(this._gamestate[n].roleId=i.id),this._send("player",{index:n,property:e,value:i.id})):this._gamestate[n]?.roleId&&(delete this._gamestate[n].roleId,this._send("player",{index:n,property:e,value:""}))}else this._send("player",{index:n,property:e,value:t})}_updatePlayer({index:s,property:e,value:t}){if(!this._isSpectator)return;const n=this._store.state.players.players[s];if(n)if(e==="role")if(!t&&n.role.team==="traveler")this._store.commit("players/update",{player:n,property:"role",value:{}});else{const i=this._store.state.roles.get(t)||this._store.getters.rolesJSONbyId.get(t)||{};this._store.commit("players/update",{player:n,property:"role",value:i})}else this._store.commit("players/update",{player:n,property:e,value:t})}sendPlayerPronouns({player:s,value:e,isFromSockets:t}){if(t||this._isSpectator&&this._store.state.session.playerId!==s.id)return;const n=this._store.state.players.players.indexOf(s);this._send("pronouns",[n,e])}_updatePlayerPronouns([s,e]){const t=this._store.state.players.players[s];this._store.commit("players/update",{player:t,property:"pronouns",value:e,isFromSockets:!0})}_handlePing([s=0,e]=[]){const t=new Date().getTime();if(this._isSpectator)e&&this._store.commit("session/setPing",parseInt(e,10));else{for(let n in this._players)this._players[n]&&t-this._players[n]>this._pingInterval*2&&(delete this._players[n],delete this._pings[n]);if(this._store.state.players.players.forEach(n=>{n.id&&!this._players[n.id]&&this._store.commit("players/update",{player:n,property:"id",value:""})}),s){this._players[s]=t;const n=parseInt(e,10);if(n&&n>0&&n<30*1e3){this._pings[s]=n;const i=Object.values(this._pings);this._store.commit("session/setPing",Math.round(i.reduce((d,v)=>d+v,0)/i.length))}}}(!this._isSpectator||s)&&this._store.commit("session/setPlayerCount",this._isSpectator?s:Object.keys(this._players).length)}_handleBye(s){this._isSpectator||(delete this._players[s],this._store.commit("session/setPlayerCount",Object.keys(this._players).length))}claimSeat(s){if(!this._isSpectator)return;const e=this._store.state.players.players;e.length>s&&(s<0||!e[s]?.id)&&this._send("claim",[s,this._store.state.session.playerId])}_updateSeat([s,e]){if(this._isSpectator)return;const t="id",n=this._store.state.players.players,i=n.findIndex(({id:d})=>d===e);if(i>=0&&i!==s&&this._store.commit("players/update",{player:n[i],property:t,value:""}),s>=0){const d=n[s];if(!d)return;this._store.commit("players/update",{player:d,property:t,value:e})}this._handlePing([1,e])}distributeRoles(){if(this._isSpectator)return;const s={};this._store.state.players.players.forEach((e,t)=>{e.id&&e.role&&(s[e.id]=["player",{index:t,property:"role",value:e.role.id}])}),Object.keys(s).length&&this._send("direct",s)}nomination(s){if(this._isSpectator)return;const e=s&&(s.nomination||s),t=this._store.state.players.players;(!e||(typeof e.nominator!="number"||t.length>e.nominator)&&(typeof e.nominee!="number"||t.length>e.nominee))&&(this.setVotingSpeed(this._store.state.session.votingSpeed),this._send("nomination",e))}setVoteInProgress(){this._isSpectator||this._send("isVoteInProgress",this._store.state.session.isVoteInProgress)}setIsNight(){this._isSpectator||this._send("isNight",this._store.state.grimoire.isNight)}setIsRinging(){this._isSpectator||this._send("isRinging",this._store.state.grimoire.isRinging)}setIsRooster(){this._isSpectator||this._send("isRooster",this._store.state.grimoire.isRooster)}setIsOrganVoteMode(){this._isSpectator||this._send("isOrganVoteMode",this._store.state.grimoire.isOrganVoteMode)}setTimer(){this._isSpectator||this._send("setTimer",this._store.state.grimoire.timer)}setVoteHistoryAllowed(){this._isSpectator||this._send("isVoteHistoryAllowed",this._store.state.session.isVoteHistoryAllowed)}setVotingSpeed(s){this._isSpectator||s&&this._send("votingSpeed",s)}setMarked(s){this._isSpectator||this._send("marked",s)}clearVoteHistory(){this._isSpectator||this._send("clearVoteHistory",null)}vote([s]){const e=this._store.state.players.players[s];(this._store.state.session.playerId===e?.id||!this._isSpectator)&&this._send("vote",[s,this._store.state.session.votes[s],!this._isSpectator])}_handleVote([s,e,t]){const{session:n,players:i}=this._store.state,d=i.players.length,v=(s-1+d-(typeof n.nomination?.nominee=="number"?n.nomination.nominee:n.nomination?.nominator||0))%d;(t||v>=n.lockedVote-1)&&this._store.commit("session/vote",[s,e])}lockVote(){if(this._isSpectator)return;const{lockedVote:s,votes:e,nomination:t}=this._store.state.session,{players:n}=this._store.state.players,i=((typeof t?.nominee=="number"?t.nominee:t?.nominator||0)+s-1)%n.length;this._send("lock",[this._store.state.session.lockedVote,e[i]])}_handleLock([s,e]){if(this._isSpectator&&(this._store.commit("session/lockVote",s),s>1)){const{lockedVote:t,nomination:n}=this._store.state.session,{players:i}=this._store.state.players,d=((typeof n?.nominee=="number"?n.nominee:n?.nominator||0)+t-1)%i.length;this._store.state.session.votes[d]!==e&&this._store.commit("session/vote",[d,e])}}swapPlayer(s){this._isSpectator||this._send("swap",s)}movePlayer(s){this._isSpectator||this._send("move",s)}removePlayer(s){this._isSpectator||this._send("remove",s)}}const El=c=>{const s=new Dl(c);c.subscribe(({type:t,payload:n},i)=>{switch(t){case"session/setSessionId":i.session.sessionId?s.connect(i.session.sessionId):(window.location.hash="",s.disconnect());break;case"session/claimSeat":s.claimSeat(n);break;case"session/distributeRoles":n&&s.distributeRoles();break;case"session/nomination":case"session/setNomination":s.nomination(n);break;case"session/setVoteInProgress":s.setVoteInProgress();break;case"session/voteSync":s.vote(n);break;case"session/lockVote":s.lockVote();break;case"session/setVotingSpeed":s.setVotingSpeed(n);break;case"session/clearVoteHistory":s.clearVoteHistory();break;case"session/setVoteHistoryAllowed":s.setVoteHistoryAllowed();break;case"toggleNight":s.setIsNight();break;case"toggleOrganVoteMode":s.setIsOrganVoteMode();break;case"toggleRinging":s.setIsRinging();break;case"toggleRooster":s.setIsRooster();break;case"setTimer":s.setTimer();break;case"setEdition":s.sendEdition();break;case"players/setFabled":s.sendFabled();break;case"session/setMarkedPlayer":s.setMarked(n);break;case"players/swap":s.swapPlayer(n);break;case"players/move":s.movePlayer(n);break;case"players/remove":s.removePlayer(n);break;case"players/set":case"players/clear":case"players/add":s.sendGamestate("",!0);break;case"players/update":{const d=n;d.property==="pronouns"?s.sendPlayerPronouns(d):s.sendPlayer(d);break}}});const e=window.location.hash.slice(1);e&&(c.commit("session/setSpectator",!0),c.commit("session/setSessionId",e),c.commit("toggleGrimoire",!1))},zl=[{id:"tb",name:"Trouble Brewing",author:"The Pandemonium Institute",description:`Clouds roll in over Ravenswood Bluff, engulfing this sleepy town and its superstitious inhabitants in foreboding shadow. Freshly-washed clothes dance eerily on lines strung between cottages. Chimneys cough plumes of smoke into the air. Exotic scents waft through cracks in windows and under doors, as hidden cauldrons lay bubbling. An unusually warm Autumn breeze wraps around vine-covered walls and whispers ominously to those brave enough to walk the cobbled streets.

Anxious mothers call their children home from play, as thunder begins to clap on the horizon. If you listen more closely, however, noises stranger still can be heard echoing from the neighbouring forest. Under the watchful eye of a looming monastery, silhouetted figures skip from doorway to doorway. Those who can read the signs know there is... Trouble Brewing.`,level:"Beginner",roles:[],logo:"tb",isOfficial:!0},{id:"snv",name:"Sects & Violets",author:"The Pandemonium Institute",description:`Vibrant spring gives way to a warm and inviting summer. Flowers of every description blossom as far as the eye can see, tenderly nurtured in public gardens and window boxes overlooking the lavish promenade. Birds sing, artists paint and philosophers ponder life's greatest mysteries inside a bustling tavern as a circus pitches its endearingly ragged tent on the edge of town.

As the townsfolk bask in frivolity and mischief, indulging themselves in fine entertainment and even finer wine, dark and clandestine forces are assembling. Witches and cults lurk in majestic ruins on the fringes of the community, hosting secret meetings in underground caves and malevolently plotting the downfall of Ravenswood Bluff and its revelers.

The time is ripe for... Sects & Violets.`,level:"Intermediate",roles:[],logo:"snv",isOfficial:!0},{id:"bmr",name:"Bad Moon Rising",author:"The Pandemonium Institute",description:`The sun is swallowed by a jagged horizon as another winter's day surrenders to the night. Flecks of orange and red decay into deeper browns, the forest transforming in silent anticipation of the coming snow.

Ravenous wolves howl from the bowels of a rocky crevasse beyond the town borders, sending birds scattering from their cozy rooks. Travelers hurry into the inn, seeking shelter from the gathering chill. They warm themselves with hot tea, sweet strains of music and hearty ale, unaware that strange and nefarious eyes stalk them from the ruins of this once great city.

Tonight, even the livestock know there is a... Bad Moon Rising.`,level:"Intermediate",roles:[],logo:"bmr",isOfficial:!0}],Bl=[["Anonymous Dishonesty","anonymous_dishonesty.json"],["Boozling","boozling.json"],["Catfishing","catfishing.json"],["Chef's Deluxe","chefs_deluxe.json"],["Church of Spies","church_of_spies.json"],["Contempt","contempt.json"],["Cultists of Atlantis","cultists_of_atlantis.json"],["Deadly Penance Day","deadly_penance_day.json"],["Devout Theists","devout_theists.json"],["Dusk in the House of the Damned","dusk_in_the_house_of_the_damned.json"],["Extension Cord","extension_cord.json"],["A Grimm Chorus","grimm_chorus.json"],["Harold Holt's Revenge","harold_holts_revenge.json"],["Hide & Seek","hide_and_seek.json"],["The Horrifying Spectacle of Public Executions","the_horrifying_spectacle_of_public_executions.json"],["Insanity & Intuition","insanity_and_intuition.json"],["Irrational Behaviour","irrational_behaviour.json"],["Knowing me, Knowing you","knowing_me_knowing_you.json"],["Lunar Eclipse","lunar_eclipse.json"],["Midnight Oasis","midnight_oasis.json"],["Monkey Do Math","monkey_do_math.json"],["No roles barred","no_roles_barred.json"],["One in one out","one_in_one_out.json"],["The Ones You Least Expect","the_ones_you_least_expect.json"],["Poppyganda","poppyganda.json"],["Punchy","punchy.json"],["Quick Maths","quick_maths.json"],["Reptiles !","reptiles.json"],["Reptiles II : Lizard in the city","reptiles2.json"],["Revenge of the Martian Vampires","revenge_of_the_martian_vampires.json"],["Reykjavik's Scheme","reykjaviks_scheme.json"],["Rochambeau","rochambeau.json"],["Separation Of Church and State","separation_church_state.json"],["Simpletown Village","simpletown_village.json"],["Storyteller's Vengeance","storytellers_vengeance.json"],["Trouble Brewing Advanced","trouble_brewing_advanced.json"],["Trouble with Violets","trouble_with_violets.json"],["Uncertain Death","uncertain_death.json"],["Visitors","visitors.json"],["Whose Cult is it Anyway","whose_cult_is_it_anyway.json"]],Al=[["Comrade Demon","comrade_demon.json"],["Frankenstein's Mayor","frankensteins_mayor.json"],["Laissez un faire","laissez_un_faire.json"],["Late night drive by","late_night_drive_by.json"],["A Lleech of Distrust","a_lleech_of_distrust.json"],["Minion is Angel Protected & the Demon Has 2 Bluffs","minion_is_angel_protected_and_the_demon_has_2_bluffs.json"],["No greater joy","no_greater_joy.json"],["On thin ice","on_thin_ice.json"],["Over the River","over_the_river.json"],["Race to the bottom","race_to_the_bottom.json"],["Spooky tea","spooky_tea.json"],["Spooky tea 2 : Very spooky","spooky_tea2.json"],["Vigormortis High school","vigormortis_high_school.json"]],Hl={official:zl,popular:Bl,teensyville:Al},Eo={name:"",id:"",role:{},reminders:[],voteToken:!1,isDead:!1,pronouns:""},Ll=()=>({players:[],fabled:[],bluffs:[]}),Fl={alive({players:c}){return c.filter(s=>!s.isDead).length},nonTravelers({players:c}){const s=c.filter(e=>e.role.team!=="traveler");return Math.min(s.length,15)},nightOrder({players:c,fabled:s},e,{edition:t}){function n(y,$){return $&&y.role.firstNightEdition?y.role.firstNightEdition:y.role.firstNight||0}function i(y,$){return $&&y.role.otherNightEdition?y.role.otherNightEdition:y.role.otherNight||0}const d=[0],v=[0];s.forEach(y=>{y.firstNight&&d.push(y),y.otherNight&&v.push(y)}),c.forEach(y=>{y.role.firstNight&&d.push(y),y.role.otherNight&&v.push(y)}),d.sort((y,$)=>(y.role?n(y,t.isOfficial||!1):y.firstNight||0)-($.role?n($,t.isOfficial||!1):$.firstNight||0)),v.sort((y,$)=>(y.role?i(y,t.isOfficial||!1):y.otherNight||0)-($.role?i($,t.isOfficial||!1):$.otherNight||0));const _=new Map;return c.forEach(y=>{const $=Math.max(d.indexOf(y),0),M=Math.max(v.indexOf(y),0);_.set(y,{first:$,other:M})}),s.forEach(y=>{const $=Math.max(d.indexOf(y),0),M=Math.max(v.indexOf(y),0);_.set(y,{first:$,other:M})}),_}},Jl={randomize({state:c,commit:s}){const e=c.players.map(t=>[Math.random(),t]).sort((t,n)=>t[0]-n[0]).map(t=>t[1]);s("set",e)},clearRoles({state:c,commit:s,rootState:e}){let t;e.session.isSpectator?t=c.players.map(n=>(n.role.team!=="traveler"&&(n.role={}),n.reminders=[],n)):t=c.players.map(({name:n,id:i,pronouns:d})=>({...Eo,name:n,id:i,pronouns:d})),s("set",t),s("setBluff")}},Ul={clear(c){c.players=[],c.bluffs=[],c.fabled=[]},set(c,s=[]){c.players=s},update(c,{player:s,property:e,value:t}){const n=c.players.indexOf(s);n>=0&&(c.players[n][e]=t)},add(c,s){c.players.push({...Eo,name:s})},remove(c,s){c.players.splice(s,1)},swap(c,[s,e]){c.players[s]&&c.players[e]&&([c.players[s],c.players[e]]=[c.players[e],c.players[s]],c.players.splice(0,0))},move(c,[s,e]){c.players.splice(e,0,c.players.splice(s,1)[0])},setBluff(c,{index:s,role:e}={}){s!==void 0?c.bluffs.splice(s,1,e):c.bluffs=[]},setFabled(c,{index:s,fabled:e}={}){s!==void 0?c.fabled.splice(s,1):e&&(Array.isArray(e)?c.fabled=e:c.fabled.push(e))}},Gl={namespaced:!0,state:Ll,getters:Fl,actions:Jl,mutations:Ul},co=(c,[s,e])=>{c.nomination&&(c.votes=[...c.votes],c.votes[s]=e===void 0?!c.votes[s]:e)},Wl=()=>({sessionId:"",isSpectator:!1,isReconnecting:!1,playerCount:0,ping:0,playerId:"",claimedSeat:-1,nomination:null,votes:[],lockedVote:0,votingSpeed:1e3,isVoteInProgress:!1,voteHistory:[],markedPlayer:-1,playerForSpecialVote:-1,isVoteHistoryAllowed:!0,isRolesDistributed:!1}),Zl={},Kl={},le=c=>(s,e)=>{s[c]=e},Ql={setPlayerId:le("playerId"),setSpectator:le("isSpectator"),setReconnecting:le("isReconnecting"),setPlayerCount:le("playerCount"),setPing:le("ping"),setVotingSpeed:le("votingSpeed"),setVoteInProgress:le("isVoteInProgress"),setMarkedPlayer:le("markedPlayer"),setPlayerForSpecialVote:le("playerForSpecialVote"),setNomination:le("nomination"),setVoteHistoryAllowed:le("isVoteHistoryAllowed"),claimSeat:le("claimedSeat"),distributeRoles:le("isRolesDistributed"),setSessionId(c,s){c.sessionId=s.toLocaleLowerCase().replace(/[^0-9a-z]/g,"").substring(0,10)},nomination(c,{nomination:s,votes:e,votingSpeed:t,lockedVote:n,isVoteInProgress:i}={}){c.nomination=s??null,c.votes=e||[],c.votingSpeed=t||c.votingSpeed,c.lockedVote=n||0,c.isVoteInProgress=i||!1},addHistory(c,s){const{players:e,isOrganVoteMode:t=!1,localeTexts:n}=s;if(!c.isVoteHistoryAllowed&&c.isSpectator||!Y(c.nomination)||c.lockedVote<=e.length)return;const i=c.nomination,d=Ja(i,e),v=t&&!d,y=n||{exile:"Exile",execution:"Execution"},$={timestamp:new Date,nominator:typeof i.nominator=="number"?e[i.nominator]?.name||"":i.nominator||"",nominee:typeof i.nominee=="number"?e[i.nominee]?.name||"":i.nominee||"",type:i.specialVote?.type||(d?y.exile:y.execution+(v&&!c.isSpectator?"*":"")),majority:Math.ceil(e.filter(M=>!M.isDead||d).length/2),votes:v&&c.isSpectator?null:e.filter((M,p)=>c.votes[p]).map(({name:M})=>M)};c.voteHistory=[...c.voteHistory,$]},clearVoteHistory(c){c.voteHistory=[]},vote:co,voteSync:co,lockVote(c,s){c.lockedVote=s!==void 0?s:c.lockedVote+1}},Xl={namespaced:!0,state:Wl,getters:Zl,actions:Kl,mutations:Ql};function ve(c){try{return c?JSON.parse(c):null}catch{return null}}const Yl=c=>{const s=M=>document.title=`Blood on the Clocktower ${M?"Town Square":"Grimoire"}`,e=localStorage.getItem("background");e&&c.commit("setBackground",e),localStorage.getItem("muted")&&c.commit("toggleMuted",!0),localStorage.getItem("static")&&c.commit("toggleStatic",!0),localStorage.getItem("imageOptIn")&&c.commit("toggleImageOptIn",!0),localStorage.getItem("streamerMode")&&c.commit("toggleStreamerMode",!0),localStorage.getItem("organVoteMode")&&c.commit("toggleOrganVoteMode",!0);const t=localStorage.getItem("zoom");t&&c.commit("setZoom",parseFloat(t)),localStorage.getItem("isGrimoire")&&(c.commit("toggleGrimoire",!1),s(!1));const n=localStorage.getItem("roles");n!==null&&(c.commit("setCustomRoles",ve(n)??[]),c.commit("setEdition",{id:"custom"}));const i=localStorage.getItem("edition");i!==null&&c.commit("setEdition",JSON.parse(i));const d=localStorage.getItem("bluffs");d!==null&&(ve(d)??[]).forEach((M,p)=>{const m=c.state.roles.get(M)??{id:""};c.commit("players/setBluff",{index:p,role:m})});const v=localStorage.getItem("fabled");if(v!==null){const M=ve(v)??[];c.commit("players/setFabled",{fabled:M.map(p=>c.state.fabled.get(p.id)??p)})}const _=localStorage.getItem("players");if(_){const M=ve(_)??[],p=c.getters.rolesJSONbyId,m=M.map(g=>({...g,role:c.state.roles.get(g.role)||p.get(g.role)||{id:""}}));c.commit("players/set",m)}const y=localStorage.getItem("playerId");y&&c.commit("session/setPlayerId",y);const $=localStorage.getItem("session");if($&&!window.location.hash.slice(1)){const M=ve($);if(M){const[p,m]=M;c.commit("session/setSpectator",p),c.commit("session/setSessionId",m)}}c.subscribe(({type:M,payload:p},m)=>{switch(M){case"toggleGrimoire":m.grimoire.isPublic?localStorage.removeItem("isGrimoire"):localStorage.setItem("isGrimoire","1"),s(m.grimoire.isPublic);break;case"setBackground":p?localStorage.setItem("background",String(p)):localStorage.removeItem("background");break;case"toggleMuted":m.grimoire.isMuted?localStorage.setItem("muted","1"):localStorage.removeItem("muted");break;case"toggleStatic":m.grimoire.isStatic?localStorage.setItem("static","1"):localStorage.removeItem("static");break;case"toggleImageOptIn":m.grimoire.isImageOptIn?localStorage.setItem("imageOptIn","1"):localStorage.removeItem("imageOptIn");break;case"toggleStreamerMode":m.grimoire.isStreamerMode?localStorage.setItem("streamerMode","1"):localStorage.removeItem("streamerMode");break;case"toggleOrganVoteMode":m.grimoire.isOrganVoteMode?localStorage.setItem("organVoteMode","1"):localStorage.removeItem("organVoteMode");break;case"setZoom":p!==0?localStorage.setItem("zoom",String(p)):localStorage.removeItem("zoom");break;case"setEdition":localStorage.setItem("edition",JSON.stringify(p)),m.edition?.isOfficial&&localStorage.removeItem("roles");break;case"setCustomRoles":!Array.isArray(p)||p.length===0?localStorage.removeItem("roles"):localStorage.setItem("roles",JSON.stringify(p));break;case"players/setBluff":localStorage.setItem("bluffs",JSON.stringify(m.players.bluffs.map(({id:g})=>g)));break;case"players/setFabled":localStorage.setItem("fabled",JSON.stringify(m.players.fabled.map(g=>g.isCustom?g:{id:g.id})));break;case"players/add":case"players/update":case"players/remove":case"players/clear":case"players/set":case"players/swap":case"players/move":m.players.players.length?localStorage.setItem("players",JSON.stringify(m.players.players.map(g=>({...g,role:g.role.id||{}})))):localStorage.removeItem("players");break;case"session/setSessionId":p?localStorage.setItem("session",JSON.stringify([m.session.isSpectator,p])):localStorage.removeItem("session");break;case"session/setPlayerId":p?localStorage.setItem("playerId",String(p)):localStorage.removeItem("playerId");break}})},Kn=Hl,uo=c=>(s,e)=>{s.grimoire[c]=e},me=c=>({grimoire:s},e)=>{e===!0||e===!1?s[c]=e:s[c]=!s[c]},ec=async()=>{const{locale:c,rolesJSON:s,jinxesJSON:e,fabledJSON:t}=await Do(async()=>{const{locale:n,rolesJSON:i,jinxesJSON:d,fabledJSON:v}=await import("./locale.p8puc5tZ.js");return{locale:n,rolesJSON:i,jinxesJSON:d,fabledJSON:v}},__vite__mapDeps([0,1,2]));return{locale:c,rolesJSON:s,jinxesJSON:e,fabledJSON:t}},go=()=>Kn.official[0]??{id:"custom",name:"Custom",isOfficial:!1,roles:[]},sc=async()=>{const{locale:c,rolesJSON:s,jinxesJSON:e,fabledJSON:t}=await ec(),n=await Do(()=>import("./ui.DGk05tUb.js"),[]),i=(m=go())=>new Map(s.default.filter(g=>g.edition===m.id||(m.roles||[]).includes(g.id)).sort((g,b)=>String(b.team).localeCompare(String(g.team))).map(g=>[g.id,g])),d=(m=go())=>new Map(s.default.filter(g=>g.team==="traveler"&&g.edition!==m.id&&!(m.roles||[]).includes(g.id)).map(g=>[g.id,g])),v=m=>m.toLocaleLowerCase().replace(/[^a-z0-9]/g,""),_=new Map(Kn.official.map(m=>[m.id,m])),y=new Map(s.default.map(m=>[m.id,m])),$=new Map(t.default.map(m=>[m.id,m]));let M=new Map;try{M=new Map(e.default.map(({id:m,hatred:g})=>[v(m),new Map(g.map(({id:b,reason:S})=>[v(b),S]))]))}catch(m){console.error("couldn't load jinxes",m)}const p={id:"",name:"",image:"",ability:"",edition:"custom",firstNight:0,firstNightReminder:"",otherNight:0,otherNightReminder:"",reminders:[],remindersGlobal:[],setup:!1,team:"townsfolk",isCustom:!0};return new Ko({modules:{players:Gl,session:Xl},state:{grimoire:{isNight:!1,isNightOrder:!1,isRinging:!1,isRooster:!1,isPublic:!0,isMenuOpen:!1,isStatic:!1,isMuted:!1,isImageOptIn:!1,isStreamerMode:!1,isOrganVoteMode:!1,zoom:0,background:"",timer:{name:"",duration:0}},modals:{edition:!1,fabled:!1,gameState:!1,nightOrder:!1,reference:!1,reminder:!1,role:!1,roles:!1,voteHistory:!1,specialVote:!1},edition:_.get("tb"),editions:Kn,roles:i(),otherTravelers:d(),fabled:$,jinxes:M,locale:c},getters:{t:m=>g=>{if(!g||typeof g!="string")return g;const b=g.split("."),S=(D,V)=>{let O=D;for(const j of V)if(O&&typeof O=="object"&&!Array.isArray(O)&&j in O)O=O[j];else return null;return O};let k=S(m.locale.default,b);return k===null&&(k=S(n.default,b)),k!==null?k:g},customRolesStripped:({roles:m})=>{const g=[],b=Object.keys(p),S=["firstNightReminder","otherNightReminder","isCustom"];return m.forEach(k=>{if(!k.isCustom)g.push({id:k.id});else{const D={},V=k,O=p;for(const j in V){if(S.includes(j))continue;const L=V[j];b.includes(j)&&L!==O[j]&&(D[String(b[b.indexOf(j)])]=L)}g.push(D)}}),g},rolesJSONbyId:()=>y},mutations:{setZoom:uo("zoom"),setBackground:uo("background"),toggleMuted:me("isMuted"),toggleMenu:me("isMenuOpen"),toggleNightOrder:me("isNightOrder"),toggleStatic:me("isStatic"),toggleNight:me("isNight"),toggleRinging:me("isRinging"),toggleRooster:me("isRooster"),toggleGrimoire:me("isPublic"),toggleImageOptIn:me("isImageOptIn"),toggleStreamerMode:me("isStreamerMode"),toggleOrganVoteMode:me("isOrganVoteMode"),setTimer(m,g){m.grimoire.timer=g},toggleModal({modals:m},g){g&&(m[g]=!m[g]);for(const b in m)b!==g&&(m[b]=!1)},setCustomRoles(m,g){const b=g.map(S=>{if(Array.isArray(S)&&S[0]){const k=Object.keys(p),D={},V=S;for(const O in V){const j=k[O];j&&(D[j]=V[O])}return D}else return S}).map(S=>{const k=S;return k.id=v(String(k.id)),k}).map(S=>y.get(S.id)||m.roles.get(S.id)||{...p,...S}).map(S=>{if(y.get(S.id))return S;const k=S;return k.imageAlt={townsfolk:"townsfolk",outsider:"outsider",minion:"minion",demon:"demon",fabled:"fabled",traveler:"traveler"}[String(S.team)]||"custom",S.firstNight=Math.abs(Number(S.firstNight)),S.otherNight=Math.abs(Number(S.otherNight)),S}).filter(S=>S.name&&S.ability&&S.team).sort((S,k)=>String(k.team).localeCompare(String(S.team)));m.roles=new Map(b.filter(S=>S.team!=="fabled").map(S=>[S.id,S])),m.fabled=new Map([...b.filter(S=>S.team==="fabled").map(S=>[S.id,S]),...t.default.map(S=>[S.id,S])]),m.otherTravelers=new Map(s.default.filter(S=>S.team==="traveler"&&!g.some(k=>k.id===S.id)).map(S=>[S.id,S]))},setEdition(m,g){_.has(g.id)?(m.edition=_.get(g.id),m.roles=i(m.edition),m.otherTravelers=d(m.edition)):m.edition=g,m.modals.edition=!1}},plugins:[Yl,El]})};let Zn=null;const tc=async()=>(Zn||(Zn=await sc()),Zn),nc=["AddressCard","Bell","BookOpen","BookDead","Chair","CheckSquare","CloudMoon","Cog","Copy","Clipboard","Dice","Dragon","ExchangeAlt","ExclamationTriangle","FileCode","FileUpload","HandPaper","HandPointRight","Heartbeat","HouseUser","Image","Link","MinusCircle","MinusSquare","Music","PeopleArrows","Play","PlusCircle","Question","Random","RedoAlt","SearchMinus","SearchPlus","Skull","Square","TheaterMasks","Times","TimesCircle","TowerBroadcast","TrashAlt","Undo","User","UserEdit","UserFriends","Users","VenusMars","VolumeUp","VolumeMute","VoteYea","WindowMaximize","WindowMinimize"],oc=["Github","Discord"],ic=Bo,ac=Ao;zo.add(...nc.map(c=>ic["fa"+c]).filter(Boolean),...oc.map(c=>ac["fa"+c]).filter(Boolean));const rc=async()=>{const c=await tc(),s=Qo(xl);s.component("FontAwesomeIcon",Ho),s.use(c),s.mount("#app")};rc().catch(console.error);export{Do as _};
